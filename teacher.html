<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Генератор комплектов — преподаватель</title>
<style>
:root{--bg:#0b1020;--card:#111a33;--ink:#e9eefc;--muted:#a7b3d6;--accent:#7aa2ff;}
*{box-sizing:border-box}
body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:linear-gradient(180deg,#070b17,#0b1020);color:var(--ink)}
header{padding:18px 16px;border-bottom:1px solid rgba(255,255,255,.08);position:sticky;top:0;background:rgba(11,16,32,.92);backdrop-filter: blur(8px);z-index:10}
h1{margin:0;font-size:18px}
small{color:var(--muted)}
.container{max-width:1180px;margin:0 auto;padding:16px;display:grid;gap:14px}
.card{background:rgba(17,26,51,.75);border:1px solid rgba(255,255,255,.08);border-radius:14px;padding:14px;box-shadow:0 10px 30px rgba(0,0,0,.25)}
.row{display:flex;flex-wrap:wrap;gap:10px;align-items:flex-end}
label{font-size:12px;color:var(--muted);display:block;margin-bottom:4px}
input,select,button{border-radius:10px;border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.06);color:var(--ink);padding:10px 10px;font-size:14px}
input{min-width:160px}
button{cursor:pointer;background:linear-gradient(180deg,rgba(122,162,255,.25),rgba(122,162,255,.12));border-color:rgba(122,162,255,.35)}
button.secondary{background:rgba(255,255,255,.06)}
.badge{display:inline-block;padding:3px 8px;border-radius:999px;border:1px solid rgba(255,255,255,.14);color:var(--muted);font-size:12px}
.note{color:var(--muted);font-size:13px;line-height:1.4}
.grid2{display:grid;grid-template-columns:1fr 1fr;gap:12px}
@media(max-width:980px){.grid2{grid-template-columns:1fr}}
table{width:100%;border-collapse:collapse;font-size:13px}
th,td{border-bottom:1px solid rgba(255,255,255,.08);padding:8px 8px;text-align:left;vertical-align:top}
th{color:#cfe0ff;font-weight:600}
hr{border:none;border-top:1px solid rgba(255,255,255,.10);margin:12px 0}
.kpi{display:flex;gap:10px;flex-wrap:wrap}
.kpi .pill{padding:8px 10px;border-radius:12px;border:1px solid rgba(255,255,255,.10);background:rgba(0,0,0,.18)}
.kpi b{display:block;font-size:16px}
svg{max-width:100%}
.variant-grid{display:grid;grid-template-columns:repeat(10, minmax(0,1fr));gap:6px;margin-top:10px}
@media(max-width:900px){.variant-grid{grid-template-columns:repeat(6,minmax(0,1fr));}}
.variant-btn{padding:8px 0;border-radius:10px;border:1px solid rgba(255,255,255,.14);background:rgba(255,255,255,.06);color:var(--ink);cursor:pointer}
.variant-btn.active{border-color:rgba(122,162,255,.7);background:rgba(122,162,255,.18)}

/* ===== ПЕЧАТЬ / PDF ===== */
.print-only{display:none}
.no-print{}
.print-page-break{}

/* аккуратные разрывы внутри карточек */
.card{break-inside:avoid; page-break-inside:avoid;}
table{break-inside:auto;}
thead{display:table-header-group;}
tfoot{display:table-footer-group;}

@media print{
  @page{margin:14mm;}

  header,
  .no-print{
    display:none !important;
  }
  .print-only{display:block !important;}

  .print-page-break{
    break-before: page;
    page-break-before: always;
  }

  body{
    background:#fff !important;
    color:#000 !important;
  }
  .container{
    max-width:none !important;
    padding:0 !important;
  }
  .card{
    background:#fff !important;
    color:#000 !important;
    box-shadow:none !important;
    border:1px solid #bbb !important;
  }
  th,td{border-bottom:1px solid #ddd !important;}
  th{color:#000 !important;}
  small,.note{color:#333 !important;}

  /* чтобы SVG/подписи не “бледнели” */
  svg text{fill:#000 !important;}
  svg line{stroke:#000 !important;}
  svg polyline{stroke:#000 !important;}
}
</style>
</head>
<body>
<header>
  <div class="container" style="padding:0 16px;">
    <div class="row" style="justify-content:space-between;align-items:center;">
      <div>
        <h1>Генератор комплектов — преподаватель</h1>
        <small>Варианты 1–30. Преподаватель: с решением. (HTML офлайн)</small>
      </div>
      <div><span class="badge">Режим преподавателя</span></div>
    </div>
  </div>
</header>

<div class="container">

  <!-- печатная шапка (видна только в PDF/печати) -->
  <div class="print-only" style="margin:0 0 10px 0;">
    <h2 style="margin:0 0 4px 0; font-size:16pt;">
      Результаты расчётов курсовой — вариант № <span id="printVar">1</span>
    </h2>
    <div style="font-size:11pt;">Дата печати: <span id="printDate"></span></div>
    <hr/>
  </div>

  <!-- Панель управления (скрывается при печати) -->
  <div class="card no-print">
    <div class="row" style="justify-content:space-between;align-items:flex-end;">
      <div class="note" style="max-width:740px;">
        Выберите <b>номер варианта (1–30)</b>. После выбора формируется <b>единый комплект исходных данных</b> для трёх задач:
        (1) временной ряд; (2) распределение вызовов по 100 участкам; (3) распределения времён реагирования по интервалам.
      </div>
      <div class="row">
        <div>
          <label>Номер варианта</label>
          <select id="variantTop"></select>
        </div>
        <div>
          <label>&nbsp;</label>
          <button id="btnKit" type="button">Применить вариант</button>
        </div>
        <div>
          <label>&nbsp;</label>
          <button class="secondary" id="btnCSV" type="button">Скачать все CSV</button>
        </div>
        <div>
          <label>&nbsp;</label>
          <button class="secondary" id="btnPrint" type="button">Печать / PDF</button>
        </div>
      </div>
    </div>

    <div class="variant-grid" id="variantGrid"></div>

    <div class="kpi" style="margin-top:10px;">
      <div class="pill"><small>Текущий вариант</small><b id="curVar">1</b></div>
      <div class="pill"><small>Подсказка</small><b>нажмите номер или выберите в списке</b></div>
    </div>

    <div class="note" style="margin-top:8px;">
      Вариант определяет: (а) ряд пожаров из вашего шаблона; (б) число выездов и распределение по участкам; (в) параметры генерации 4 времён (T₁≤1 мин, T₂≤1 мин, T₃≤10 мин) и их интервальные частоты.
    </div>
  </div>

  <div class="card" id="sec1">
    <h3 style="margin:0 0 8px 0;">Раздел 1. Временной ряд (пожары по дням недели за 3 года)</h3>
    <div id="s1out"></div>
    <div id="s1teacher" style="margin-top:12px;">
      <div class="grid2">
        <div>
          <h4 style="margin:0 0 6px 0;">Автокорреляция (до лага 10)</h4>
          <div id="s1acfTable"></div>
        </div>
        <div>
          <h4 style="margin:0 0 6px 0;">Коррелограмма</h4>
          <div id="s1acfPlot"></div>
        </div>
      </div>
    </div>
  </div>

  <div class="card print-page-break" id="sec2">
    <h3 style="margin:0 0 8px 0;">Раздел 2. Вызовы по территории (100 участков, сетка 10×10)</h3>
    <div class="kpi" id="s2kpi"></div>
    <hr/>
    <div class="grid2">
      <div>
        <h4 style="margin:0 0 6px 0;">Матрица 10×10 (число вызовов на участке)</h4>
        <div id="s2grid"></div>
      </div>
      <div>
        <h4 style="margin:0 0 6px 0;">Эмпирические частоты (число участков с k вызовами)</h4>
        <div id="s2freq"></div>
        <div id="s2teacher" style="margin-top:12px;">
          <h4 style="margin:0 0 6px 0;">Проверка χ² Пирсона (преподаватель)</h4>
          <div id="s2chi"></div>
        </div>
      </div>
    </div>
  </div>

  <div class="card print-page-break" id="sec3">
    <h3 style="margin:0 0 8px 0;">Раздел 3. Времена реагирования (4 распределения по интервалам, N=100)</h3>
    <div class="kpi" id="s3kpi"></div>
    <hr/>
    <div id="s3out"></div>
    <div id="s3teacher" style="margin-top:12px;">
      <h4 style="margin:0 0 6px 0;">Подбор порядка Эрланга по χ² (преподаватель)</h4>
      <div id="s3summary"></div>
      <div style="margin-top:10px;">
        <h4 style="margin:0 0 6px 0;">χ² по кандидатам k=1..4</h4>
        <div id="s3chiTables"></div>
      </div>
      <div class="note" style="margin-top:8px;">Ключ для преподавателя: генерация построена так, что истинные порядки: T₀→k=1, T₁→k=2, T₂→k=3, T₃→k=4.</div>
    </div>
  </div>

  <div class="card">
    <div class="note"><b>Экспорт:</b> «Скачать все CSV» выгружает 4 файла: Раздел 1 (ряд), Раздел 2 (матрица 10×10 и частоты), Раздел 3 (Oᵢ для T₀..T₃).</div>
  </div>
</div>

<script>

  const SECTION1_VARIANTS = {"1": [{"year": 2019, "dow": "пн", "label": "2019 пн", "fires": 65112.0}, {"year": 2019, "dow": "вт", "label": "2019 вт", "fires": 65031.0}, {"year": 2019, "dow": "ср", "label": "2019 ср", "fires": 64572.0}, {"year": 2019, "dow": "чт", "label": "2019 чт", "fires": 64644.0}, {"year": 2019, "dow": "пт", "label": "2019 пт", "fires": 65180.0}, {"year": 2019, "dow": "сб", "label": "2019 сб", "fires": 73216.0}, {"year": 2019, "dow": "вскр", "label": "2019 вскр", "fires": 73671.0}, {"year": 2020, "dow": "пн", "label": "2020 пн", "fires": 61291.0}, {"year": 2020, "dow": "вт", "label": "2020 вт", "fires": 58590.0}, {"year": 2020, "dow": "ср", "label": "2020 ср", "fires": 60495.0}, {"year": 2020, "dow": "чт", "label": "2020 чт", "fires": 61158.0}, {"year": 2020, "dow": "пт", "label": "2020 пт", "fires": 60283.0}, {"year": 2020, "dow": "сб", "label": "2020 сб", "fires": 68270.0}, {"year": 2020, "dow": "вскр", "label": "2020 вскр", "fires": 69219.0}, {"year": 2021, "dow": "пн", "label": "2021 пн", "fires": 56024.0}, {"year": 2021, "dow": "вт", "label": "2021 вт", "fires": 53725.0}, {"year": 2021, "dow": "ср", "label": "2021 ср", "fires": 52014.0}, {"year": 2021, "dow": "чт", "label": "2021 чт", "fires": 51877.0}, {"year": 2021, "dow": "пт", "label": "2021 пт", "fires": 55242.0}, {"year": 2021, "dow": "сб", "label": "2021 сб", "fires": 60697.0}, {"year": 2021, "dow": "вскр", "label": "2021 вскр", "fires": 61185.0}], "2": [{"year": 2019, "dow": "пн", "label": "2019 пн", "fires": 65462.380074470326}, {"year": 2019, "dow": "вт", "label": "2019 вт", "fires": 65089.17861844688}, {"year": 2019, "dow": "ср", "label": "2019 ср", "fires": 65350.919117404555}, {"year": 2019, "dow": "чт", "label": "2019 чт", "fires": 64647.3999361937}, {"year": 2019, "dow": "пт", "label": "2019 пт", "fires": 65304.30018087598}, {"year": 2019, "dow": "сб", "label": "2019 сб", "fires": 65818.89304070263}, {"year": 2019, "dow": "вскр", "label": "2019 вскр", "fires": 73975.46006762922}, {"year": 2020, "dow": "пн", "label": "2020 пн", "fires": 64952.10249648602}, {"year": 2020, "dow": "вт", "label": "2020 вт", "fires": 59064.0189619438}, {"year": 2020, "dow": "ср", "label": "2020 ср", "fires": 58998.025860274465}, {"year": 2020, "dow": "чт", "label": "2020 чт", "fires": 61413.24194219662}, {"year": 2020, "dow": "пт", "label": "2020 пт", "fires": 61119.0574572214}, {"year": 2020, "dow": "сб", "label": "2020 сб", "fires": 65142.755078679445}, {"year": 2020, "dow": "вскр", "label": "2020 вскр", "fires": 69324.07025917877}, {"year": 2021, "dow": "пн", "label": "2021 пн", "fires": 65239.93585793768}, {"year": 2021, "dow": "вт", "label": "2021 вт", "fires": 55247.203934402656}, {"year": 2021, "dow": "ср", "label": "2021 ср", "fires": 53375.60004519739}, {"year": 2021, "dow": "чт", "label": "2021 чт", "fires": 52013.427937006185}, {"year": 2021, "dow": "пт", "label": "2021 пт", "fires": 53155.43040334574}, {"year": 2021, "dow": "сб", "label": "2021 сб", "fires": 59230.3266582684}, {"year": 2021, "dow": "вскр", "label": "2021 вскр", "fires": 61013.669414276665}], "3": [{"year": 2019, "dow": "пн", "label": "2019 пн", "fires": 65157.599723906664}, {"year": 2019, "dow": "вт", "label": "2019 вт", "fires": 65476.15192553747}, {"year": 2019, "dow": "ср", "label": "2019 ср", "fires": 65327.73003613227}, {"year": 2019, "dow": "чт", "label": "2019 чт", "fires": 65462.59705877297}, {"year": 2019, "dow": "пт", "label": "2019 пт", "fires": 65171.266070235055}, {"year": 2019, "dow": "сб", "label": "2019 сб", "fires": 69150.45350222706}, {"year": 2019, "dow": "вскр", "label": "2019 вскр", "fires": 73672.94139723828}, {"year": 2020, "dow": "пн", "label": "2020 пн", "fires": 73246.88814341759}, {"year": 2020, "dow": "вт", "label": "2020 вт", "fires": 59009.89494211266}, {"year": 2020, "dow": "ср", "label": "2020 ср", "fires": 59929.681881967124}, {"year": 2020, "dow": "чт", "label": "2020 чт", "fires": 61240.73945223741}, {"year": 2020, "dow": "пт", "label": "2020 пт", "fires": 60688.37416719986}, {"year": 2020, "dow": "сб", "label": "2020 сб", "fires": 65150.40218722815}, {"year": 2020, "dow": "вскр", "label": "2020 вскр", "fires": 69127.36475890786}, {"year": 2021, "dow": "пн", "label": "2021 пн", "fires": 59458.107403896065}, {"year": 2021, "dow": "вт", "label": "2021 вт", "fires": 55083.255370558276}, {"year": 2021, "dow": "ср", "label": "2021 ср", "fires": 52667.48576925759}, {"year": 2021, "dow": "чт", "label": "2021 чт", "fires": 52005.381379141036}, {"year": 2021, "dow": "пт", "label": "2021 пт", "fires": 52702.60991954548}, {"year": 2021, "dow": "сб", "label": "2021 сб", "fires": 56084.30206633376}, {"year": 2021, "dow": "вскр", "label": "2021 вскр", "fires": 61029.36971546367}], "4": [{"year": 2019, "dow": "пн", "label": "2019 пн", "fires": 65170.559089892515}, {"year": 2019, "dow": "вт", "label": "2019 вт", "fires": 65189.18009223408}, {"year": 2019, "dow": "ср", "label": "2019 ср", "fires": 65388.140736878275}, {"year": 2019, "dow": "чт", "label": "2019 чт", "fires": 64849.357997745836}, {"year": 2019, "dow": "пт", "label": "2019 пт", "fires": 65213.97071137341}, {"year": 2019, "dow": "сб", "label": "2019 сб", "fires": 70070.86761065079}, {"year": 2019, "dow": "вскр", "label": "2019 вскр", "fires": 73661.2626977788}, {"year": 2020, "dow": "пн", "label": "2020 пн", "fires": 61588.83743949438}, {"year": 2020, "dow": "вт", "label": "2020 вт", "fires": 59726.08475626576}, {"year": 2020, "dow": "ср", "label": "2020 ср", "fires": 59624.092622256496}, {"year": 2020, "dow": "чт", "label": "2020 чт", "fires": 61488.98038126539}, {"year": 2020, "dow": "пт", "label": "2020 пт", "fires": 60605.303214685155}, {"year": 2020, "dow": "сб", "label": "2020 сб", "fires": 64609.70306119838}, {"year": 2020, "dow": "вскр", "label": "2020 вскр", "fires": 69278.57416054433}, {"year": 2021, "dow": "пн", "label": "2021 пн", "fires": 63542.200932491505}, {"year": 2021, "dow": "вт", "label": "2021 вт", "fires": 54912.65767262752}, {"year": 2021, "dow": "ср", "label": "2021 ср", "fires": 53402.60487827506}, {"year": 2021, "dow": "чт", "label": "2021 чт", "fires": 52002.0708664733}, {"year": 2021, "dow": "пт", "label": "2021 пт", "fires": 52553.54116119354}, {"year": 2021, "dow": "сб", "label": "2021 сб", "fires": 56608.02466180038}, {"year": 2021, "dow": "вскр", "label": "2021 вскр", "fires": 61456.572831488105}], "5": [{"year": 2019, "dow": "пн", "label": "2019 пн", "fires": 65226.69719288437}, {"year": 2019, "dow": "вт", "label": "2019 вт", "fires": 65123.954880494544}, {"year": 2019, "dow": "ср", "label": "2019 ср", "fires": 65216.249462666055}, {"year": 2019, "dow": "чт", "label": "2019 чт", "fires": 65195.21084182334}, {"year": 2019, "dow": "пт", "label": "2019 пт", "fires": 64739.45064436435}, {"year": 2019, "dow": "сб", "label": "2019 сб", "fires": 68395.7244606851}, {"year": 2019, "dow": "вскр", "label": "2019 вскр", "fires": 73473.67426851382}, {"year": 2020, "dow": "пн", "label": "2020 пн", "fires": 73255.82111780654}, {"year": 2020, "dow": "вт", "label": "2020 вт", "fires": 60102.77543166711}, {"year": 2020, "dow": "ср", "label": "2020 ср", "fires": 58838.917336814004}, {"year": 2020, "dow": "чт", "label": "2020 чт", "fires": 61230.512901502334}, {"year": 2020, "dow": "пт", "label": "2020 пт", "fires": 60641.78279561885}, {"year": 2020, "dow": "сб", "label": "2020 сб", "fires": 61629.334741334846}, {"year": 2020, "dow": "вскр", "label": "2020 вскр", "fires": 69403.18414778652}, {"year": 2021, "dow": "пн", "label": "2021 пн", "fires": 66915.86709773788}, {"year": 2021, "dow": "вт", "label": "2021 вт", "fires": 54009.14940511413}, {"year": 2021, "dow": "ср", "label": "2021 ср", "fires": 53611.63701397325}, {"year": 2021, "dow": "чт", "label": "2021 чт", "fires": 52000.78642124412}, {"year": 2021, "dow": "пт", "label": "2021 пт", "fires": 54049.635943065296}, {"year": 2021, "dow": "сб", "label": "2021 сб", "fires": 56639.544609194934}, {"year": 2021, "dow": "вскр", "label": "2021 вскр", "fires": 60936.963290155065}], "6": [{"year": 2019, "dow": "пн", "label": "2019 пн", "fires": 65340.23364301907}, {"year": 2019, "dow": "вт", "label": "2019 вт", "fires": 65234.67035418434}, {"year": 2019, "dow": "ср", "label": "2019 ср", "fires": 65447.24315576864}, {"year": 2019, "dow": "чт", "label": "2019 чт", "fires": 64893.757688183934}, {"year": 2019, "dow": "пт", "label": "2019 пт", "fires": 65291.39866197994}, {"year": 2019, "dow": "сб", "label": "2019 сб", "fires": 68938.15714804902}, {"year": 2019, "dow": "вскр", "label": "2019 вскр", "fires": 73613.92006883734}, {"year": 2020, "dow": "пн", "label": "2020 пн", "fires": 64800.01387710582}, {"year": 2020, "dow": "вт", "label": "2020 вт", "fires": 60655.70097969509}, {"year": 2020, "dow": "ср", "label": "2020 ср", "fires": 60637.041358393086}, {"year": 2020, "dow": "чт", "label": "2020 чт", "fires": 60715.60347517531}, {"year": 2020, "dow": "пт", "label": "2020 пт", "fires": 60869.117967674225}, {"year": 2020, "dow": "сб", "label": "2020 сб", "fires": 62615.99216724132}, {"year": 2020, "dow": "вскр", "label": "2020 вскр", "fires": 68702.46507795654}, {"year": 2021, "dow": "пн", "label": "2021 пн", "fires": 68660.89965467106}, {"year": 2021, "dow": "вт", "label": "2021 вт", "fires": 54026.31200550343}, {"year": 2021, "dow": "ср", "label": "2021 ср", "fires": 53333.60125006546}, {"year": 2021, "dow": "чт", "label": "2021 чт", "fires": 52006.09723426884}, {"year": 2021, "dow": "пт", "label": "2021 пт", "fires": 53753.1486453159}, {"year": 2021, "dow": "сб", "label": "2021 сб", "fires": 60755.381113803625}, {"year": 2021, "dow": "вскр", "label": "2021 вскр", "fires": 61221.65699546451}], "7": [{"year": 2019, "dow": "пн", "label": "2019 пн", "fires": 65394.95349810615}, {"year": 2019, "dow": "вт", "label": "2019 вт", "fires": 65249.75416982263}, {"year": 2019, "dow": "ср", "label": "2019 ср", "fires": 65071.83395257245}, {"year": 2019, "dow": "чт", "label": "2019 чт", "fires": 65104.051772848776}, {"year": 2019, "dow": "пт", "label": "2019 пт", "fires": 65123.10881720325}, {"year": 2019, "dow": "сб", "label": "2019 сб", "fires": 71449.50714847584}, {"year": 2019, "dow": "вскр", "label": "2019 вскр", "fires": 73989.67551134177}, {"year": 2020, "dow": "пн", "label": "2020 пн", "fires": 73433.55189854185}, {"year": 2020, "dow": "вт", "label": "2020 вт", "fires": 60847.4550628854}, {"year": 2020, "dow": "ср", "label": "2020 ср", "fires": 60848.546726185195}, {"year": 2020, "dow": "чт", "label": "2020 чт", "fires": 60915.58729872037}, {"year": 2020, "dow": "пт", "label": "2020 пт", "fires": 60684.623698794756}, {"year": 2020, "dow": "сб", "label": "2020 сб", "fires": 63853.64583985772}, {"year": 2020, "dow": "вскр", "label": "2020 вскр", "fires": 68469.81779903188}, {"year": 2021, "dow": "пн", "label": "2021 пн", "fires": 56914.98627320071}, {"year": 2021, "dow": "вт", "label": "2021 вт", "fires": 54205.270721732406}, {"year": 2021, "dow": "ср", "label": "2021 ср", "fires": 52686.54551334105}, {"year": 2021, "dow": "чт", "label": "2021 чт", "fires": 52011.87164975064}, {"year": 2021, "dow": "пт", "label": "2021 пт", "fires": 52203.6171738352}, {"year": 2021, "dow": "сб", "label": "2021 сб", "fires": 57991.57357661492}, {"year": 2021, "dow": "вскр", "label": "2021 вскр", "fires": 60952.30899258723}], "8": [{"year": 2019, "dow": "пн", "label": "2019 пн", "fires": 65164.04905946199}, {"year": 2019, "dow": "вт", "label": "2019 вт", "fires": 65483.59558401143}, {"year": 2019, "dow": "ср", "label": "2019 ср", "fires": 65053.913047984664}, {"year": 2019, "dow": "чт", "label": "2019 чт", "fires": 65148.14104055605}, {"year": 2019, "dow": "пт", "label": "2019 пт", "fires": 65387.73968424034}, {"year": 2019, "dow": "сб", "label": "2019 сб", "fires": 70379.34337245233}, {"year": 2019, "dow": "вскр", "label": "2019 вскр", "fires": 73509.90476089566}, {"year": 2020, "dow": "пн", "label": "2020 пн", "fires": 64116.19296724335}, {"year": 2020, "dow": "вт", "label": "2020 вт", "fires": 59517.978042754155}, {"year": 2020, "dow": "ср", "label": "2020 ср", "fires": 59576.06630572704}, {"year": 2020, "dow": "чт", "label": "2020 чт", "fires": 60721.60668155524}, {"year": 2020, "dow": "пт", "label": "2020 пт", "fires": 60675.438179529956}, {"year": 2020, "dow": "сб", "label": "2020 сб", "fires": 65248.24816209019}, {"year": 2020, "dow": "вскр", "label": "2020 вскр", "fires": 69497.02040356831}, {"year": 2021, "dow": "пн", "label": "2021 пн", "fires": 59314.16636109359}, {"year": 2021, "dow": "вт", "label": "2021 вт", "fires": 55555.926539778935}, {"year": 2021, "dow": "ср", "label": "2021 ср", "fires": 53586.25245107438}, {"year": 2021, "dow": "чт", "label": "2021 чт", "fires": 52008.720876057414}, {"year": 2021, "dow": "пт", "label": "2021 пт", "fires": 54629.50779103117}, {"year": 2021, "dow": "сб", "label": "2021 сб", "fires": 57002.97694303096}, {"year": 2021, "dow": "вскр", "label": "2021 вскр", "fires": 60920.517218274494}], "9": [{"year": 2019, "dow": "пн", "label": "2019 пн", "fires": 65324.89135154505}, {"year": 2019, "dow": "вт", "label": "2019 вт", "fires": 65427.64510188277}, {"year": 2019, "dow": "ср", "label": "2019 ср", "fires": 65134.368528346386}, {"year": 2019, "dow": "чт", "label": "2019 чт", "fires": 64724.8524266629}, {"year": 2019, "dow": "пт", "label": "2019 пт", "fires": 65136.8953214529}, {"year": 2019, "dow": "сб", "label": "2019 сб", "fires": 68641.14469950927}, {"year": 2019, "dow": "вскр", "label": "2019 вскр", "fires": 73981.90590837682}, {"year": 2020, "dow": "пн", "label": "2020 пн", "fires": 62921.01346316491}, {"year": 2020, "dow": "вт", "label": "2020 вт", "fires": 60794.1675814856}, {"year": 2020, "dow": "ср", "label": "2020 ср", "fires": 59381.770724287235}, {"year": 2020, "dow": "чт", "label": "2020 чт", "fires": 60925.75789434433}, {"year": 2020, "dow": "пт", "label": "2020 пт", "fires": 60754.00245055298}, {"year": 2020, "dow": "сб", "label": "2020 сб", "fires": 61148.30735678849}, {"year": 2020, "dow": "вскр", "label": "2020 вскр", "fires": 69414.82556028858}, {"year": 2021, "dow": "пн", "label": "2021 пн", "fires": 59269.87509752703}, {"year": 2021, "dow": "вт", "label": "2021 вт", "fires": 54349.04784300048}, {"year": 2021, "dow": "ср", "label": "2021 ср", "fires": 52274.06108709077}, {"year": 2021, "dow": "чт", "label": "2021 чт", "fires": 52007.654185516316}, {"year": 2021, "dow": "пт", "label": "2021 пт", "fires": 54683.03178525451}, {"year": 2021, "dow": "сб", "label": "2021 сб", "fires": 55536.17556329979}, {"year": 2021, "dow": "вскр", "label": "2021 вскр", "fires": 61080.96912788778}], "10": [{"year": 2019, "dow": "пн", "label": "2019 пн", "fires": 65428.2134663207}, {"year": 2019, "dow": "вт", "label": "2019 вт", "fires": 65360.946992464385}, {"year": 2019, "dow": "ср", "label": "2019 ср", "fires": 65422.21548377219}, {"year": 2019, "dow": "чт", "label": "2019 чт", "fires": 64686.72641106094}, {"year": 2019, "dow": "пт", "label": "2019 пт", "fires": 65382.586512825044}, {"year": 2019, "dow": "сб", "label": "2019 сб", "fires": 66440.1339291155}, {"year": 2019, "dow": "вскр", "label": "2019 вскр", "fires": 73841.62617322795}, {"year": 2020, "dow": "пн", "label": "2020 пн", "fires": 70315.99713646299}, {"year": 2020, "dow": "вт", "label": "2020 вт", "fires": 59915.65916937287}, {"year": 2020, "dow": "ср", "label": "2020 ср", "fires": 60448.977125647645}, {"year": 2020, "dow": "чт", "label": "2020 чт", "fires": 61423.99340181864}, {"year": 2020, "dow": "пт", "label": "2020 пт", "fires": 61135.34631862219}, {"year": 2020, "dow": "сб", "label": "2020 сб", "fires": 60822.03716390651}, {"year": 2020, "dow": "вскр", "label": "2020 вскр", "fires": 68766.68011663164}, {"year": 2021, "dow": "пн", "label": "2021 пн", "fires": 61780.22874184627}, {"year": 2021, "dow": "вт", "label": "2021 вт", "fires": 55691.19940859329}, {"year": 2021, "dow": "ср", "label": "2021 ср", "fires": 52635.37190756281}, {"year": 2021, "dow": "чт", "label": "2021 чт", "fires": 52012.69949180549}, {"year": 2021, "dow": "пт", "label": "2021 пт", "fires": 54984.42997354644}, {"year": 2021, "dow": "сб", "label": "2021 сб", "fires": 60699.32014699999}, {"year": 2021, "dow": "вскр", "label": "2021 вскр", "fires": 61092.766527194326}], "11": [{"year": 2019, "dow": "пн", "label": "2019 пн", "fires": 65317.15809878574}, {"year": 2019, "dow": "вт", "label": "2019 вт", "fires": 65137.26836220354}, {"year": 2019, "dow": "ср", "label": "2019 ср", "fires": 65197.38173392891}, {"year": 2019, "dow": "чт", "label": "2019 чт", "fires": 65184.3845267443}, {"year": 2019, "dow": "пт", "label": "2019 пт", "fires": 64949.86142658102}, {"year": 2019, "dow": "сб", "label": "2019 сб", "fires": 73162.71537175457}, {"year": 2019, "dow": "вскр", "label": "2019 вскр", "fires": 73931.41709071284}, {"year": 2020, "dow": "пн", "label": "2020 пн", "fires": 72053.16392956738}, {"year": 2020, "dow": "вт", "label": "2020 вт", "fires": 59663.89660208413}, {"year": 2020, "dow": "ср", "label": "2020 ср", "fires": 59381.36543402753}, {"year": 2020, "dow": "чт", "label": "2020 чт", "fires": 61015.82793695333}, {"year": 2020, "dow": "пт", "label": "2020 пт", "fires": 60664.059584365285}, {"year": 2020, "dow": "сб", "label": "2020 сб", "fires": 63895.21037894586}, {"year": 2020, "dow": "вскр", "label": "2020 вскр", "fires": 69056.44148884587}, {"year": 2021, "dow": "пн", "label": "2021 пн", "fires": 58708.40217975272}, {"year": 2021, "dow": "вт", "label": "2021 вт", "fires": 54328.90543379863}, {"year": 2021, "dow": "ср", "label": "2021 ср", "fires": 52578.82367611971}, {"year": 2021, "dow": "чт", "label": "2021 чт", "fires": 52000.0615045553}, {"year": 2021, "dow": "пт", "label": "2021 пт", "fires": 53368.911732339795}, {"year": 2021, "dow": "сб", "label": "2021 сб", "fires": 55555.73876798613}, {"year": 2021, "dow": "вскр", "label": "2021 вскр", "fires": 60995.30251597687}], "12": [{"year": 2019, "dow": "пн", "label": "2019 пн", "fires": 65445.51596261578}, {"year": 2019, "dow": "вт", "label": "2019 вт", "fires": 65214.89094234296}, {"year": 2019, "dow": "ср", "label": "2019 ср", "fires": 65132.189728336896}, {"year": 2019, "dow": "чт", "label": "2019 чт", "fires": 64681.433082949035}, {"year": 2019, "dow": "пт", "label": "2019 пт", "fires": 65004.49651477794}, {"year": 2019, "dow": "сб", "label": "2019 сб", "fires": 71087.50513706234}, {"year": 2019, "dow": "вскр", "label": "2019 вскр", "fires": 73344.49799713338}, {"year": 2020, "dow": "пн", "label": "2020 пн", "fires": 62019.59013153781}, {"year": 2020, "dow": "вт", "label": "2020 вт", "fires": 59031.21090856815}, {"year": 2020, "dow": "ср", "label": "2020 ср", "fires": 60610.521265899435}, {"year": 2020, "dow": "чт", "label": "2020 чт", "fires": 61163.974169188616}, {"year": 2020, "dow": "пт", "label": "2020 пт", "fires": 60733.929681686845}, {"year": 2020, "dow": "сб", "label": "2020 сб", "fires": 67697.56751739676}, {"year": 2020, "dow": "вскр", "label": "2020 вскр", "fires": 68909.74703896604}, {"year": 2021, "dow": "пн", "label": "2021 пн", "fires": 63016.39841804276}, {"year": 2021, "dow": "вт", "label": "2021 вт", "fires": 55282.72869097948}, {"year": 2021, "dow": "ср", "label": "2021 ср", "fires": 52229.50240498477}, {"year": 2021, "dow": "чт", "label": "2021 чт", "fires": 52008.11285629628}, {"year": 2021, "dow": "пт", "label": "2021 пт", "fires": 54529.80421778991}, {"year": 2021, "dow": "сб", "label": "2021 сб", "fires": 56117.80008305967}, {"year": 2021, "dow": "вскр", "label": "2021 вскр", "fires": 61133.48043261617}], "13": [{"year": 2019, "dow": "пн", "label": "2019 пн", "fires": 65203.6712446351}, {"year": 2019, "dow": "вт", "label": "2019 вт", "fires": 65372.998707590654}, {"year": 2019, "dow": "ср", "label": "2019 ср", "fires": 65359.13930683734}, {"year": 2019, "dow": "чт", "label": "2019 чт", "fires": 64725.362325018155}, {"year": 2019, "dow": "пт", "label": "2019 пт", "fires": 64725.18433336779}, {"year": 2019, "dow": "сб", "label": "2019 сб", "fires": 68195.11728174154}, {"year": 2019, "dow": "вскр", "label": "2019 вскр", "fires": 73941.77705708133}, {"year": 2020, "dow": "пн", "label": "2020 пн", "fires": 73125.38293957815}, {"year": 2020, "dow": "вт", "label": "2020 вт", "fires": 59299.321600778014}, {"year": 2020, "dow": "ср", "label": "2020 ср", "fires": 60235.284176783236}, {"year": 2020, "dow": "чт", "label": "2020 чт", "fires": 61228.98477963183}, {"year": 2020, "dow": "пт", "label": "2020 пт", "fires": 61021.256894603604}, {"year": 2020, "dow": "сб", "label": "2020 сб", "fires": 63667.8149443259}, {"year": 2020, "dow": "вскр", "label": "2020 вскр", "fires": 68934.57376683518}, {"year": 2021, "dow": "пн", "label": "2021 пн", "fires": 61827.05832408442}, {"year": 2021, "dow": "вт", "label": "2021 вт", "fires": 55254.678491330196}, {"year": 2021, "dow": "ср", "label": "2021 ср", "fires": 53178.4029554344}, {"year": 2021, "dow": "чт", "label": "2021 чт", "fires": 52009.02553061084}, {"year": 2021, "dow": "пт", "label": "2021 пт", "fires": 54210.462325369655}, {"year": 2021, "dow": "сб", "label": "2021 сб", "fires": 60161.94888558043}, {"year": 2021, "dow": "вскр", "label": "2021 вскр", "fires": 61009.8939448102}], "14": [{"year": 2019, "dow": "пн", "label": "2019 пн", "fires": 65477.5626356077}, {"year": 2019, "dow": "вт", "label": "2019 вт", "fires": 65345.22892480437}, {"year": 2019, "dow": "ср", "label": "2019 ср", "fires": 65034.00266153716}, {"year": 2019, "dow": "чт", "label": "2019 чт", "fires": 65032.97234854792}, {"year": 2019, "dow": "пт", "label": "2019 пт", "fires": 65283.12744867016}, {"year": 2019, "dow": "сб", "label": "2019 сб", "fires": 70944.99709232168}, {"year": 2019, "dow": "вскр", "label": "2019 вскр", "fires": 73369.10582087925}, {"year": 2020, "dow": "пн", "label": "2020 пн", "fires": 66898.44971207035}, {"year": 2020, "dow": "вт", "label": "2020 вт", "fires": 59991.093013132064}, {"year": 2020, "dow": "ср", "label": "2020 ср", "fires": 59907.427166404945}, {"year": 2020, "dow": "чт", "label": "2020 чт", "fires": 61437.29387727025}, {"year": 2020, "dow": "пт", "label": "2020 пт", "fires": 60640.47520260054}, {"year": 2020, "dow": "сб", "label": "2020 сб", "fires": 61414.331547664384}, {"year": 2020, "dow": "вскр", "label": "2020 вскр", "fires": 68696.98576225048}, {"year": 2021, "dow": "пн", "label": "2021 пн", "fires": 56742.51700493478}, {"year": 2021, "dow": "вт", "label": "2021 вт", "fires": 54242.329383419215}, {"year": 2021, "dow": "ср", "label": "2021 ср", "fires": 52889.00692794087}, {"year": 2021, "dow": "чт", "label": "2021 чт", "fires": 52002.575578960044}, {"year": 2021, "dow": "пт", "label": "2021 пт", "fires": 53974.786539197536}, {"year": 2021, "dow": "сб", "label": "2021 сб", "fires": 56583.919822955344}, {"year": 2021, "dow": "вскр", "label": "2021 вскр", "fires": 61070.394163760946}], "15": [{"year": 2019, "dow": "пн", "label": "2019 пн", "fires": 65287.83514837407}, {"year": 2019, "dow": "вт", "label": "2019 вт", "fires": 65378.857432965}, {"year": 2019, "dow": "ср", "label": "2019 ср", "fires": 65228.67587802379}, {"year": 2019, "dow": "чт", "label": "2019 чт", "fires": 65436.00314660222}, {"year": 2019, "dow": "пт", "label": "2019 пт", "fires": 65244.583692205764}, {"year": 2019, "dow": "сб", "label": "2019 сб", "fires": 66234.8879741095}, {"year": 2019, "dow": "вскр", "label": "2019 вскр", "fires": 73849.01218449572}, {"year": 2020, "dow": "пн", "label": "2020 пн", "fires": 69105.73639997176}, {"year": 2020, "dow": "вт", "label": "2020 вт", "fires": 60195.24833496649}, {"year": 2020, "dow": "ср", "label": "2020 ср", "fires": 59109.154810662294}, {"year": 2020, "dow": "чт", "label": "2020 чт", "fires": 60950.18691252277}, {"year": 2020, "dow": "пт", "label": "2020 пт", "fires": 60551.388280547355}, {"year": 2020, "dow": "сб", "label": "2020 сб", "fires": 66598.60756020302}, {"year": 2020, "dow": "вскр", "label": "2020 вскр", "fires": 68292.6180727136}, {"year": 2021, "dow": "пн", "label": "2021 пн", "fires": 57388.905334525465}, {"year": 2021, "dow": "вт", "label": "2021 вт", "fires": 54496.005560549966}, {"year": 2021, "dow": "ср", "label": "2021 ср", "fires": 53476.796308295954}, {"year": 2021, "dow": "чт", "label": "2021 чт", "fires": 52003.457001436924}, {"year": 2021, "dow": "пт", "label": "2021 пт", "fires": 52258.90737919826}, {"year": 2021, "dow": "сб", "label": "2021 сб", "fires": 59341.41491074519}, {"year": 2021, "dow": "вскр", "label": "2021 вскр", "fires": 61384.79774993733}], "16": [{"year": 2019, "dow": "пн", "label": "2019 пн", "fires": 65136.916396131324}, {"year": 2019, "dow": "вт", "label": "2019 вт", "fires": 65052.3784685938}, {"year": 2019, "dow": "ср", "label": "2019 ср", "fires": 65437.044053866586}, {"year": 2019, "dow": "чт", "label": "2019 чт", "fires": 64853.95415012501}, {"year": 2019, "dow": "пт", "label": "2019 пт", "fires": 65464.63199219168}, {"year": 2019, "dow": "сб", "label": "2019 сб", "fires": 69221.83205470591}, {"year": 2019, "dow": "вскр", "label": "2019 вскр", "fires": 73951.92855846185}, {"year": 2020, "dow": "пн", "label": "2020 пн", "fires": 64717.853781804806}, {"year": 2020, "dow": "вт", "label": "2020 вт", "fires": 61184.53231536519}, {"year": 2020, "dow": "ср", "label": "2020 ср", "fires": 58653.808501362284}, {"year": 2020, "dow": "чт", "label": "2020 чт", "fires": 61043.4751251137}, {"year": 2020, "dow": "пт", "label": "2020 пт", "fires": 60593.27946203191}, {"year": 2020, "dow": "сб", "label": "2020 сб", "fires": 66990.33053413671}, {"year": 2020, "dow": "вскр", "label": "2020 вскр", "fires": 68979.04608366192}, {"year": 2021, "dow": "пн", "label": "2021 пн", "fires": 65644.57440775011}, {"year": 2021, "dow": "вт", "label": "2021 вт", "fires": 54896.45348391251}, {"year": 2021, "dow": "ср", "label": "2021 ср", "fires": 53604.10602166505}, {"year": 2021, "dow": "чт", "label": "2021 чт", "fires": 52013.29798494416}, {"year": 2021, "dow": "пт", "label": "2021 пт", "fires": 55237.74654256543}, {"year": 2021, "dow": "сб", "label": "2021 сб", "fires": 55557.86729931304}, {"year": 2021, "dow": "вскр", "label": "2021 вскр", "fires": 61229.87480798971}], "17": [{"year": 2019, "dow": "пн", "label": "2019 пн", "fires": 65365.985265322415}, {"year": 2019, "dow": "вт", "label": "2019 вт", "fires": 65343.76291954504}, {"year": 2019, "dow": "ср", "label": "2019 ср", "fires": 65153.647544839194}, {"year": 2019, "dow": "чт", "label": "2019 чт", "fires": 65012.95698054849}, {"year": 2019, "dow": "пт", "label": "2019 пт", "fires": 64654.5329521668}, {"year": 2019, "dow": "сб", "label": "2019 сб", "fires": 72106.7559346375}, {"year": 2019, "dow": "вскр", "label": "2019 вскр", "fires": 73239.61010962908}, {"year": 2020, "dow": "пн", "label": "2020 пн", "fires": 69983.81466715487}, {"year": 2020, "dow": "вт", "label": "2020 вт", "fires": 59479.28453562337}, {"year": 2020, "dow": "ср", "label": "2020 ср", "fires": 60459.98648443264}, {"year": 2020, "dow": "чт", "label": "2020 чт", "fires": 61045.01087477732}, {"year": 2020, "dow": "пт", "label": "2020 пт", "fires": 60750.01520326959}, {"year": 2020, "dow": "сб", "label": "2020 сб", "fires": 61916.31358562011}, {"year": 2020, "dow": "вскр", "label": "2020 вскр", "fires": 69395.41753290872}, {"year": 2021, "dow": "пн", "label": "2021 пн", "fires": 56566.48078641269}, {"year": 2021, "dow": "вт", "label": "2021 вт", "fires": 55176.89363868415}, {"year": 2021, "dow": "ср", "label": "2021 ср", "fires": 52296.16079090842}, {"year": 2021, "dow": "чт", "label": "2021 чт", "fires": 52005.68486794755}, {"year": 2021, "dow": "пт", "label": "2021 пт", "fires": 54573.240972458385}, {"year": 2021, "dow": "сб", "label": "2021 сб", "fires": 58541.13022798727}, {"year": 2021, "dow": "вскр", "label": "2021 вскр", "fires": 60921.20988441473}], "18": [{"year": 2019, "dow": "пн", "label": "2019 пн", "fires": 65397.52375693921}, {"year": 2019, "dow": "вт", "label": "2019 вт", "fires": 65254.97379901375}, {"year": 2019, "dow": "ср", "label": "2019 ср", "fires": 65182.36615823241}, {"year": 2019, "dow": "чт", "label": "2019 чт", "fires": 65470.26844029739}, {"year": 2019, "dow": "пт", "label": "2019 пт", "fires": 65340.63286609245}, {"year": 2019, "dow": "сб", "label": "2019 сб", "fires": 65707.81282368461}, {"year": 2019, "dow": "вскр", "label": "2019 вскр", "fires": 73438.89952673408}, {"year": 2020, "dow": "пн", "label": "2020 пн", "fires": 67336.4358646744}, {"year": 2020, "dow": "вт", "label": "2020 вт", "fires": 59505.06175561436}, {"year": 2020, "dow": "ср", "label": "2020 ср", "fires": 59910.81684695614}, {"year": 2020, "dow": "чт", "label": "2020 чт", "fires": 60589.2387580191}, {"year": 2020, "dow": "пт", "label": "2020 пт", "fires": 60746.859963283976}, {"year": 2020, "dow": "сб", "label": "2020 сб", "fires": 65192.13747562693}, {"year": 2020, "dow": "вскр", "label": "2020 вскр", "fires": 68272.41425906791}, {"year": 2021, "dow": "пн", "label": "2021 пн", "fires": 69174.09534379635}, {"year": 2021, "dow": "вт", "label": "2021 вт", "fires": 55831.81301913365}, {"year": 2021, "dow": "ср", "label": "2021 ср", "fires": 52959.12178465846}, {"year": 2021, "dow": "чт", "label": "2021 чт", "fires": 52003.029596269465}, {"year": 2021, "dow": "пт", "label": "2021 пт", "fires": 52332.696322051874}, {"year": 2021, "dow": "сб", "label": "2021 сб", "fires": 56681.79354816453}, {"year": 2021, "dow": "вскр", "label": "2021 вскр", "fires": 61216.533753933385}], "19": [{"year": 2019, "dow": "пн", "label": "2019 пн", "fires": 65198.82965617805}, {"year": 2019, "dow": "вт", "label": "2019 вт", "fires": 65460.307205196106}, {"year": 2019, "dow": "ср", "label": "2019 ср", "fires": 65340.60081936696}, {"year": 2019, "dow": "чт", "label": "2019 чт", "fires": 65082.4051486573}, {"year": 2019, "dow": "пт", "label": "2019 пт", "fires": 65457.50919093595}, {"year": 2019, "dow": "сб", "label": "2019 сб", "fires": 69343.97857177092}, {"year": 2019, "dow": "вскр", "label": "2019 вскр", "fires": 73497.87543864004}, {"year": 2020, "dow": "пн", "label": "2020 пн", "fires": 72756.57452044093}, {"year": 2020, "dow": "вт", "label": "2020 вт", "fires": 61071.93335564382}, {"year": 2020, "dow": "ср", "label": "2020 ср", "fires": 59808.33364734363}, {"year": 2020, "dow": "чт", "label": "2020 чт", "fires": 60548.00807453216}, {"year": 2020, "dow": "пт", "label": "2020 пт", "fires": 60582.149005796295}, {"year": 2020, "dow": "сб", "label": "2020 сб", "fires": 64733.46604371308}, {"year": 2020, "dow": "вскр", "label": "2020 вскр", "fires": 68504.72064285398}, {"year": 2021, "dow": "пн", "label": "2021 пн", "fires": 67815.8356952134}, {"year": 2021, "dow": "вт", "label": "2021 вт", "fires": 55904.58706905638}, {"year": 2021, "dow": "ср", "label": "2021 ср", "fires": 52755.48731507492}, {"year": 2021, "dow": "чт", "label": "2021 чт", "fires": 52008.92833644241}, {"year": 2021, "dow": "пт", "label": "2021 пт", "fires": 54706.38120724561}, {"year": 2021, "dow": "сб", "label": "2021 сб", "fires": 58813.22263022718}, {"year": 2021, "dow": "вскр", "label": "2021 вскр", "fires": 60761.16541989039}], "20": [{"year": 2019, "dow": "пн", "label": "2019 пн", "fires": 65244.637372320154}, {"year": 2019, "dow": "вт", "label": "2019 вт", "fires": 65240.00468199032}, {"year": 2019, "dow": "ср", "label": "2019 ср", "fires": 65173.58006204936}, {"year": 2019, "dow": "чт", "label": "2019 чт", "fires": 64955.243493076334}, {"year": 2019, "dow": "пт", "label": "2019 пт", "fires": 64699.28446659204}, {"year": 2019, "dow": "сб", "label": "2019 сб", "fires": 68688.50993673495}, {"year": 2019, "dow": "вскр", "label": "2019 вскр", "fires": 73718.57572283618}, {"year": 2020, "dow": "пн", "label": "2020 пн", "fires": 69719.81155131082}, {"year": 2020, "dow": "вт", "label": "2020 вт", "fires": 59187.28330663883}, {"year": 2020, "dow": "ср", "label": "2020 ср", "fires": 60140.66522137785}, {"year": 2020, "dow": "чт", "label": "2020 чт", "fires": 60589.447443789715}, {"year": 2020, "dow": "пт", "label": "2020 пт", "fires": 60875.92562858263}, {"year": 2020, "dow": "сб", "label": "2020 сб", "fires": 68244.0060068965}, {"year": 2020, "dow": "вскр", "label": "2020 вскр", "fires": 68907.89272342125}, {"year": 2021, "dow": "пн", "label": "2021 пн", "fires": 59137.67453949882}, {"year": 2021, "dow": "вт", "label": "2021 вт", "fires": 55055.002688857254}, {"year": 2021, "dow": "ср", "label": "2021 ср", "fires": 53684.442459877384}, {"year": 2021, "dow": "чт", "label": "2021 чт", "fires": 52010.309030361284}, {"year": 2021, "dow": "пт", "label": "2021 пт", "fires": 54987.1398043518}, {"year": 2021, "dow": "сб", "label": "2021 сб", "fires": 56338.776144404794}, {"year": 2021, "dow": "вскр", "label": "2021 вскр", "fires": 60790.45814966835}], "21": [{"year": 2019, "dow": "пн", "label": "2019 пн", "fires": 65367.51908246498}, {"year": 2019, "dow": "вт", "label": "2019 вт", "fires": 65497.73782582858}, {"year": 2019, "dow": "ср", "label": "2019 ср", "fires": 65233.7426147621}, {"year": 2019, "dow": "чт", "label": "2019 чт", "fires": 65175.25064507889}, {"year": 2019, "dow": "пт", "label": "2019 пт", "fires": 65108.9045543206}, {"year": 2019, "dow": "сб", "label": "2019 сб", "fires": 65976.72681878689}, {"year": 2019, "dow": "вскр", "label": "2019 вскр", "fires": 73434.50424160661}, {"year": 2020, "dow": "пн", "label": "2020 пн", "fires": 63852.03258406419}, {"year": 2020, "dow": "вт", "label": "2020 вт", "fires": 59440.504640637904}, {"year": 2020, "dow": "ср", "label": "2020 ср", "fires": 58957.77055791017}, {"year": 2020, "dow": "чт", "label": "2020 чт", "fires": 61440.6774293799}, {"year": 2020, "dow": "пт", "label": "2020 пт", "fires": 60876.10189811915}, {"year": 2020, "dow": "сб", "label": "2020 сб", "fires": 61217.73869781571}, {"year": 2020, "dow": "вскр", "label": "2020 вскр", "fires": 68416.32459197484}, {"year": 2021, "dow": "пн", "label": "2021 пн", "fires": 64441.70105716893}, {"year": 2021, "dow": "вт", "label": "2021 вт", "fires": 55199.768995241044}, {"year": 2021, "dow": "ср", "label": "2021 ср", "fires": 52266.91241748886}, {"year": 2021, "dow": "чт", "label": "2021 чт", "fires": 52008.24564700295}, {"year": 2021, "dow": "пт", "label": "2021 пт", "fires": 54899.31993919244}, {"year": 2021, "dow": "сб", "label": "2021 сб", "fires": 60603.54804148787}, {"year": 2021, "dow": "вскр", "label": "2021 вскр", "fires": 60966.85215640979}], "22": [{"year": 2019, "dow": "пн", "label": "2019 пн", "fires": 65119.884075632755}, {"year": 2019, "dow": "вт", "label": "2019 вт", "fires": 65243.616080993204}, {"year": 2019, "dow": "ср", "label": "2019 ср", "fires": 65321.77953621965}, {"year": 2019, "dow": "чт", "label": "2019 чт", "fires": 65360.10107366023}, {"year": 2019, "dow": "пт", "label": "2019 пт", "fires": 64780.916054522684}, {"year": 2019, "dow": "сб", "label": "2019 сб", "fires": 67520.39982542543}, {"year": 2019, "dow": "вскр", "label": "2019 вскр", "fires": 73802.53430525614}, {"year": 2020, "dow": "пн", "label": "2020 пн", "fires": 72036.30063904435}, {"year": 2020, "dow": "вт", "label": "2020 вт", "fires": 59478.30417769101}, {"year": 2020, "dow": "ср", "label": "2020 ср", "fires": 60881.52206682091}, {"year": 2020, "dow": "чт", "label": "2020 чт", "fires": 61015.28997793838}, {"year": 2020, "dow": "пт", "label": "2020 пт", "fires": 60712.2207555546}, {"year": 2020, "dow": "сб", "label": "2020 сб", "fires": 65076.13574174119}, {"year": 2020, "dow": "вскр", "label": "2020 вскр", "fires": 69119.90680889446}, {"year": 2021, "dow": "пн", "label": "2021 пн", "fires": 67636.66495860943}, {"year": 2021, "dow": "вт", "label": "2021 вт", "fires": 55627.982121624744}, {"year": 2021, "dow": "ср", "label": "2021 ср", "fires": 52698.34556327893}, {"year": 2021, "dow": "чт", "label": "2021 чт", "fires": 52009.50797206516}, {"year": 2021, "dow": "пт", "label": "2021 пт", "fires": 53645.792271205915}, {"year": 2021, "dow": "сб", "label": "2021 сб", "fires": 58325.62763210659}, {"year": 2021, "dow": "вскр", "label": "2021 вскр", "fires": 60721.078425882355}], "23": [{"year": 2019, "dow": "пн", "label": "2019 пн", "fires": 65265.312213684876}, {"year": 2019, "dow": "вт", "label": "2019 вт", "fires": 65170.61852899571}, {"year": 2019, "dow": "ср", "label": "2019 ср", "fires": 65335.285688615746}, {"year": 2019, "dow": "чт", "label": "2019 чт", "fires": 64883.12252394638}, {"year": 2019, "dow": "пт", "label": "2019 пт", "fires": 64897.06468724872}, {"year": 2019, "dow": "сб", "label": "2019 сб", "fires": 68196.75143211796}, {"year": 2019, "dow": "вскр", "label": "2019 вскр", "fires": 73894.4685532683}, {"year": 2020, "dow": "пн", "label": "2020 пн", "fires": 63681.73094627064}, {"year": 2020, "dow": "вт", "label": "2020 вт", "fires": 59536.28521620662}, {"year": 2020, "dow": "ср", "label": "2020 ср", "fires": 60018.50035463964}, {"year": 2020, "dow": "чт", "label": "2020 чт", "fires": 61109.819991763514}, {"year": 2020, "dow": "пт", "label": "2020 пт", "fires": 60895.27703315412}, {"year": 2020, "dow": "сб", "label": "2020 сб", "fires": 60800.088052716266}, {"year": 2020, "dow": "вскр", "label": "2020 вскр", "fires": 69436.84407402221}, {"year": 2021, "dow": "пн", "label": "2021 пн", "fires": 59346.47696874637}, {"year": 2021, "dow": "вт", "label": "2021 вт", "fires": 55812.60782666099}, {"year": 2021, "dow": "ср", "label": "2021 ср", "fires": 53438.206588208785}, {"year": 2021, "dow": "чт", "label": "2021 чт", "fires": 52001.73602539126}, {"year": 2021, "dow": "пт", "label": "2021 пт", "fires": 53303.54589371282}, {"year": 2021, "dow": "сб", "label": "2021 сб", "fires": 57879.33875721655}, {"year": 2021, "dow": "вскр", "label": "2021 вскр", "fires": 61388.60254506265}], "24": [{"year": 2019, "dow": "пн", "label": "2019 пн", "fires": 65444.31784342158}, {"year": 2019, "dow": "вт", "label": "2019 вт", "fires": 65471.5915549995}, {"year": 2019, "dow": "ср", "label": "2019 ср", "fires": 65224.35340402044}, {"year": 2019, "dow": "чт", "label": "2019 чт", "fires": 64685.22244739366}, {"year": 2019, "dow": "пт", "label": "2019 пт", "fires": 65154.13622342749}, {"year": 2019, "dow": "сб", "label": "2019 сб", "fires": 66302.08244060131}, {"year": 2019, "dow": "вскр", "label": "2019 вскр", "fires": 73500.3838508407}, {"year": 2020, "dow": "пн", "label": "2020 пн", "fires": 70029.80137924742}, {"year": 2020, "dow": "вт", "label": "2020 вт", "fires": 60393.18044584511}, {"year": 2020, "dow": "ср", "label": "2020 ср", "fires": 60464.71105212186}, {"year": 2020, "dow": "чт", "label": "2020 чт", "fires": 60630.326089832495}, {"year": 2020, "dow": "пт", "label": "2020 пт", "fires": 60522.18105487909}, {"year": 2020, "dow": "сб", "label": "2020 сб", "fires": 62172.49939325278}, {"year": 2020, "dow": "вскр", "label": "2020 вскр", "fires": 69216.41892249395}, {"year": 2021, "dow": "пн", "label": "2021 пн", "fires": 66850.15655983999}, {"year": 2021, "dow": "вт", "label": "2021 вт", "fires": 55819.15320678514}, {"year": 2021, "dow": "ср", "label": "2021 ср", "fires": 53649.126837820295}, {"year": 2021, "dow": "чт", "label": "2021 чт", "fires": 52004.94842829271}, {"year": 2021, "dow": "пт", "label": "2021 пт", "fires": 52083.31921230257}, {"year": 2021, "dow": "сб", "label": "2021 сб", "fires": 60776.35297706653}, {"year": 2021, "dow": "вскр", "label": "2021 вскр", "fires": 60826.277386204885}], "25": [{"year": 2019, "dow": "пн", "label": "2019 пн", "fires": 65117.191222038105}, {"year": 2019, "dow": "вт", "label": "2019 вт", "fires": 65346.282434245586}, {"year": 2019, "dow": "ср", "label": "2019 ср", "fires": 65379.586295191664}, {"year": 2019, "dow": "чт", "label": "2019 чт", "fires": 65306.48031712017}, {"year": 2019, "dow": "пт", "label": "2019 пт", "fires": 64863.6820203092}, {"year": 2019, "dow": "сб", "label": "2019 сб", "fires": 70528.73331637401}, {"year": 2019, "dow": "вскр", "label": "2019 вскр", "fires": 73573.32828512401}, {"year": 2020, "dow": "пн", "label": "2020 пн", "fires": 67679.4824627674}, {"year": 2020, "dow": "вт", "label": "2020 вт", "fires": 59322.79509886935}, {"year": 2020, "dow": "ср", "label": "2020 ср", "fires": 59228.4877495107}, {"year": 2020, "dow": "чт", "label": "2020 чт", "fires": 61166.06606942844}, {"year": 2020, "dow": "пт", "label": "2020 пт", "fires": 60733.57356124874}, {"year": 2020, "dow": "сб", "label": "2020 сб", "fires": 68166.97338421698}, {"year": 2020, "dow": "вскр", "label": "2020 вскр", "fires": 69036.3052382837}, {"year": 2021, "dow": "пн", "label": "2021 пн", "fires": 59280.96589574456}, {"year": 2021, "dow": "вт", "label": "2021 вт", "fires": 55834.197967623724}, {"year": 2021, "dow": "ср", "label": "2021 ср", "fires": 53253.02907279303}, {"year": 2021, "dow": "чт", "label": "2021 чт", "fires": 52008.00256803763}, {"year": 2021, "dow": "пт", "label": "2021 пт", "fires": 53167.42047672323}, {"year": 2021, "dow": "сб", "label": "2021 сб", "fires": 56905.006815047986}, {"year": 2021, "dow": "вскр", "label": "2021 вскр", "fires": 61261.91001716688}], "26": [{"year": 2019, "dow": "пн", "label": "2019 пн", "fires": 65418.949786926445}, {"year": 2019, "dow": "вт", "label": "2019 вт", "fires": 65053.761512419005}, {"year": 2019, "dow": "ср", "label": "2019 ср", "fires": 65069.42712258323}, {"year": 2019, "dow": "чт", "label": "2019 чт", "fires": 65324.83525620611}, {"year": 2019, "dow": "пт", "label": "2019 пт", "fires": 64832.74358775058}, {"year": 2019, "dow": "сб", "label": "2019 сб", "fires": 69130.47285202169}, {"year": 2019, "dow": "вскр", "label": "2019 вскр", "fires": 73601.7376158444}, {"year": 2020, "dow": "пн", "label": "2020 пн", "fires": 68066.89996332893}, {"year": 2020, "dow": "вт", "label": "2020 вт", "fires": 59231.49263026676}, {"year": 2020, "dow": "ср", "label": "2020 ср", "fires": 60880.20944849264}, {"year": 2020, "dow": "чт", "label": "2020 чт", "fires": 61018.92825509748}, {"year": 2020, "dow": "пт", "label": "2020 пт", "fires": 61024.830695864504}, {"year": 2020, "dow": "сб", "label": "2020 сб", "fires": 61760.519687080116}, {"year": 2020, "dow": "вскр", "label": "2020 вскр", "fires": 68566.46187963203}, {"year": 2021, "dow": "пн", "label": "2021 пн", "fires": 60108.98052558257}, {"year": 2021, "dow": "вт", "label": "2021 вт", "fires": 54255.91459284939}, {"year": 2021, "dow": "ср", "label": "2021 ср", "fires": 52731.76516983541}, {"year": 2021, "dow": "чт", "label": "2021 чт", "fires": 52009.54994518291}, {"year": 2021, "dow": "пт", "label": "2021 пт", "fires": 55142.00117780345}, {"year": 2021, "dow": "сб", "label": "2021 сб", "fires": 57563.75316953586}, {"year": 2021, "dow": "вскр", "label": "2021 вскр", "fires": 61028.32576312119}], "27": [{"year": 2019, "dow": "пн", "label": "2019 пн", "fires": 65448.35926500538}, {"year": 2019, "dow": "вт", "label": "2019 вт", "fires": 65390.636412782194}, {"year": 2019, "dow": "ср", "label": "2019 ср", "fires": 65081.83891957154}, {"year": 2019, "dow": "чт", "label": "2019 чт", "fires": 65496.60917908032}, {"year": 2019, "dow": "пт", "label": "2019 пт", "fires": 64908.69592968045}, {"year": 2019, "dow": "сб", "label": "2019 сб", "fires": 70062.17053471686}, {"year": 2019, "dow": "вскр", "label": "2019 вскр", "fires": 73739.61420923356}, {"year": 2020, "dow": "пн", "label": "2020 пн", "fires": 63468.97806864363}, {"year": 2020, "dow": "вт", "label": "2020 вт", "fires": 60102.939578115984}, {"year": 2020, "dow": "ср", "label": "2020 ср", "fires": 60751.4711033718}, {"year": 2020, "dow": "чт", "label": "2020 чт", "fires": 61013.00175881893}, {"year": 2020, "dow": "пт", "label": "2020 пт", "fires": 60789.198263679}, {"year": 2020, "dow": "сб", "label": "2020 сб", "fires": 63861.56250807275}, {"year": 2020, "dow": "вскр", "label": "2020 вскр", "fires": 69480.25291402337}, {"year": 2021, "dow": "пн", "label": "2021 пн", "fires": 58392.97710954403}, {"year": 2021, "dow": "вт", "label": "2021 вт", "fires": 55646.1838974534}, {"year": 2021, "dow": "ср", "label": "2021 ср", "fires": 52591.80280453452}, {"year": 2021, "dow": "чт", "label": "2021 чт", "fires": 52008.75082223454}, {"year": 2021, "dow": "пт", "label": "2021 пт", "fires": 53037.700054106055}, {"year": 2021, "dow": "сб", "label": "2021 сб", "fires": 55608.569619924194}, {"year": 2021, "dow": "вскр", "label": "2021 вскр", "fires": 61033.327186135546}], "28": [{"year": 2019, "dow": "пн", "label": "2019 пн", "fires": 65445.137117896855}, {"year": 2019, "dow": "вт", "label": "2019 вт", "fires": 65182.54938475245}, {"year": 2019, "dow": "ср", "label": "2019 ср", "fires": 65047.12209438137}, {"year": 2019, "dow": "чт", "label": "2019 чт", "fires": 65174.86420936773}, {"year": 2019, "dow": "пт", "label": "2019 пт", "fires": 64669.948895077956}, {"year": 2019, "dow": "сб", "label": "2019 сб", "fires": 71144.70599812578}, {"year": 2019, "dow": "вскр", "label": "2019 вскр", "fires": 73712.19984906615}, {"year": 2020, "dow": "пн", "label": "2020 пн", "fires": 71764.16384961897}, {"year": 2020, "dow": "вт", "label": "2020 вт", "fires": 60574.2460263186}, {"year": 2020, "dow": "ср", "label": "2020 ср", "fires": 60044.60368027126}, {"year": 2020, "dow": "чт", "label": "2020 чт", "fires": 60930.86852573969}, {"year": 2020, "dow": "пт", "label": "2020 пт", "fires": 60947.79446062385}, {"year": 2020, "dow": "сб", "label": "2020 сб", "fires": 68601.81220097622}, {"year": 2020, "dow": "вскр", "label": "2020 вскр", "fires": 68293.82584904756}, {"year": 2021, "dow": "пн", "label": "2021 пн", "fires": 57059.22285708092}, {"year": 2021, "dow": "вт", "label": "2021 вт", "fires": 54878.33211572769}, {"year": 2021, "dow": "ср", "label": "2021 ср", "fires": 53048.94840840547}, {"year": 2021, "dow": "чт", "label": "2021 чт", "fires": 52006.561684822846}, {"year": 2021, "dow": "пт", "label": "2021 пт", "fires": 52791.58399834918}, {"year": 2021, "dow": "сб", "label": "2021 сб", "fires": 55371.468590545956}, {"year": 2021, "dow": "вскр", "label": "2021 вскр", "fires": 60704.32077986492}], "29": [{"year": 2019, "dow": "пн", "label": "2019 пн", "fires": 65188.845715127616}, {"year": 2019, "dow": "вт", "label": "2019 вт", "fires": 65395.79193925938}, {"year": 2019, "dow": "ср", "label": "2019 ср", "fires": 65130.63449255022}, {"year": 2019, "dow": "чт", "label": "2019 чт", "fires": 64771.97615973548}, {"year": 2019, "dow": "пт", "label": "2019 пт", "fires": 64815.44216790162}, {"year": 2019, "dow": "сб", "label": "2019 сб", "fires": 71265.8170588361}, {"year": 2019, "dow": "вскр", "label": "2019 вскр", "fires": 73920.31708312487}, {"year": 2020, "dow": "пн", "label": "2020 пн", "fires": 66682.43676263237}, {"year": 2020, "dow": "вт", "label": "2020 вт", "fires": 60801.01963410636}, {"year": 2020, "dow": "ср", "label": "2020 ср", "fires": 60105.08503246226}, {"year": 2020, "dow": "чт", "label": "2020 чт", "fires": 60757.66505685389}, {"year": 2020, "dow": "пт", "label": "2020 пт", "fires": 60687.025423534506}, {"year": 2020, "dow": "сб", "label": "2020 сб", "fires": 68262.43707102015}, {"year": 2020, "dow": "вскр", "label": "2020 вскр", "fires": 69430.89109678211}, {"year": 2021, "dow": "пн", "label": "2021 пн", "fires": 62063.47013708866}, {"year": 2021, "dow": "вт", "label": "2021 вт", "fires": 54209.241553304935}, {"year": 2021, "dow": "ср", "label": "2021 ср", "fires": 52783.12683900627}, {"year": 2021, "dow": "чт", "label": "2021 чт", "fires": 52012.02114054318}, {"year": 2021, "dow": "пт", "label": "2021 пт", "fires": 54156.627440772936}, {"year": 2021, "dow": "сб", "label": "2021 сб", "fires": 60698.08420530229}, {"year": 2021, "dow": "вскр", "label": "2021 вскр", "fires": 61349.789014215836}], "30": [{"year": 2019, "dow": "пн", "label": "2019 пн", "fires": 65333.737987122106}, {"year": 2019, "dow": "вт", "label": "2019 вт", "fires": 65174.722734116374}, {"year": 2019, "dow": "ср", "label": "2019 ср", "fires": 65119.44697149959}, {"year": 2019, "dow": "чт", "label": "2019 чт", "fires": 65053.312908864114}, {"year": 2019, "dow": "пт", "label": "2019 пт", "fires": 65283.23226942437}, {"year": 2019, "dow": "сб", "label": "2019 сб", "fires": 67294.72826522561}, {"year": 2019, "dow": "вскр", "label": "2019 вскр", "fires": 73284.11928434008}, {"year": 2020, "dow": "пн", "label": "2020 пн", "fires": 73024.97197219402}, {"year": 2020, "dow": "вт", "label": "2020 вт", "fires": 61137.373058979276}, {"year": 2020, "dow": "ср", "label": "2020 ср", "fires": 60989.83125598035}, {"year": 2020, "dow": "чт", "label": "2020 чт", "fires": 60524.12635011282}, {"year": 2020, "dow": "пт", "label": "2020 пт", "fires": 60712.89885502084}, {"year": 2020, "dow": "сб", "label": "2020 сб", "fires": 63340.72513569288}, {"year": 2020, "dow": "вскр", "label": "2020 вскр", "fires": 68804.65956829378}, {"year": 2021, "dow": "пн", "label": "2021 пн", "fires": 60477.260347660005}, {"year": 2021, "dow": "вт", "label": "2021 вт", "fires": 54885.625407586136}, {"year": 2021, "dow": "ср", "label": "2021 ср", "fires": 52534.374470351686}, {"year": 2021, "dow": "чт", "label": "2021 чт", "fires": 52001.64030727471}, {"year": 2021, "dow": "пт", "label": "2021 пт", "fires": 54739.465441059045}, {"year": 2021, "dow": "сб", "label": "2021 сб", "fires": 56972.04418153059}, {"year": 2021, "dow": "вскр", "label": "2021 вскр", "fires": 61280.400410620445}]};
const VARIANT_CONFIGS = [{"variant": 1, "totalCalls": 300, "hotspot": 0, "meanT0": 44.2, "meanT1": 0.34, "meanT2": 0.5, "meanT3": 6.5, "seed2": 107919, "seed3": 304729}, {"variant": 2, "totalCalls": 305, "hotspot": 0, "meanT0": 41.8, "meanT1": 0.43, "meanT2": 0.3, "meanT3": 7.5, "seed2": 115838, "seed3": 409458}, {"variant": 3, "totalCalls": 310, "hotspot": 1, "meanT0": 46.0, "meanT1": 0.52, "meanT2": 0.5, "meanT3": 5.5, "seed2": 123757, "seed3": 514187}, {"variant": 4, "totalCalls": 315, "hotspot": 0, "meanT0": 43.6, "meanT1": 0.31, "meanT2": 0.3, "meanT3": 6.5, "seed2": 131676, "seed3": 618916}, {"variant": 5, "totalCalls": 320, "hotspot": 0, "meanT0": 41.2, "meanT1": 0.4, "meanT2": 0.5, "meanT3": 7.5, "seed2": 139595, "seed3": 723645}, {"variant": 6, "totalCalls": 325, "hotspot": 1, "meanT0": 45.4, "meanT1": 0.49, "meanT2": 0.3, "meanT3": 5.5, "seed2": 147514, "seed3": 828374}, {"variant": 7, "totalCalls": 330, "hotspot": 0, "meanT0": 43.0, "meanT1": 0.28, "meanT2": 0.5, "meanT3": 6.5, "seed2": 155433, "seed3": 933103}, {"variant": 8, "totalCalls": 335, "hotspot": 0, "meanT0": 40.6, "meanT1": 0.37, "meanT2": 0.3, "meanT3": 7.5, "seed2": 163352, "seed3": 1037832}, {"variant": 9, "totalCalls": 340, "hotspot": 1, "meanT0": 44.8, "meanT1": 0.46, "meanT2": 0.5, "meanT3": 5.5, "seed2": 171271, "seed3": 1142561}, {"variant": 10, "totalCalls": 345, "hotspot": 0, "meanT0": 42.4, "meanT1": 0.25, "meanT2": 0.3, "meanT3": 6.5, "seed2": 179190, "seed3": 1247290}, {"variant": 11, "totalCalls": 350, "hotspot": 0, "meanT0": 40.0, "meanT1": 0.34, "meanT2": 0.5, "meanT3": 7.5, "seed2": 187109, "seed3": 1352019}, {"variant": 12, "totalCalls": 355, "hotspot": 1, "meanT0": 44.2, "meanT1": 0.43, "meanT2": 0.3, "meanT3": 5.5, "seed2": 195028, "seed3": 1456748}, {"variant": 13, "totalCalls": 360, "hotspot": 0, "meanT0": 41.8, "meanT1": 0.52, "meanT2": 0.5, "meanT3": 6.5, "seed2": 202947, "seed3": 1561477}, {"variant": 14, "totalCalls": 365, "hotspot": 0, "meanT0": 46.0, "meanT1": 0.31, "meanT2": 0.3, "meanT3": 7.5, "seed2": 210866, "seed3": 1666206}, {"variant": 15, "totalCalls": 370, "hotspot": 1, "meanT0": 43.6, "meanT1": 0.4, "meanT2": 0.5, "meanT3": 5.5, "seed2": 218785, "seed3": 1770935}, {"variant": 16, "totalCalls": 375, "hotspot": 0, "meanT0": 41.2, "meanT1": 0.49, "meanT2": 0.3, "meanT3": 6.5, "seed2": 226704, "seed3": 1875664}, {"variant": 17, "totalCalls": 380, "hotspot": 0, "meanT0": 45.4, "meanT1": 0.28, "meanT2": 0.5, "meanT3": 7.5, "seed2": 234623, "seed3": 1980393}, {"variant": 18, "totalCalls": 385, "hotspot": 1, "meanT0": 43.0, "meanT1": 0.37, "meanT2": 0.3, "meanT3": 5.5, "seed2": 242542, "seed3": 2085122}, {"variant": 19, "totalCalls": 390, "hotspot": 0, "meanT0": 40.6, "meanT1": 0.46, "meanT2": 0.5, "meanT3": 6.5, "seed2": 250461, "seed3": 2189851}, {"variant": 20, "totalCalls": 395, "hotspot": 0, "meanT0": 44.8, "meanT1": 0.25, "meanT2": 0.3, "meanT3": 7.5, "seed2": 258380, "seed3": 2294580}, {"variant": 21, "totalCalls": 400, "hotspot": 1, "meanT0": 42.4, "meanT1": 0.34, "meanT2": 0.5, "meanT3": 5.5, "seed2": 266299, "seed3": 2399309}, {"variant": 22, "totalCalls": 405, "hotspot": 0, "meanT0": 40.0, "meanT1": 0.43, "meanT2": 0.3, "meanT3": 6.5, "seed2": 274218, "seed3": 2504038}, {"variant": 23, "totalCalls": 410, "hotspot": 0, "meanT0": 44.2, "meanT1": 0.52, "meanT2": 0.5, "meanT3": 7.5, "seed2": 282137, "seed3": 2608767}, {"variant": 24, "totalCalls": 415, "hotspot": 1, "meanT0": 41.8, "meanT1": 0.31, "meanT2": 0.3, "meanT3": 5.5, "seed2": 290056, "seed3": 2713496}, {"variant": 25, "totalCalls": 420, "hotspot": 0, "meanT0": 46.0, "meanT1": 0.4, "meanT2": 0.5, "meanT3": 6.5, "seed2": 297975, "seed3": 2818225}, {"variant": 26, "totalCalls": 425, "hotspot": 0, "meanT0": 43.6, "meanT1": 0.49, "meanT2": 0.3, "meanT3": 7.5, "seed2": 305894, "seed3": 2922954}, {"variant": 27, "totalCalls": 430, "hotspot": 1, "meanT0": 41.2, "meanT1": 0.28, "meanT2": 0.5, "meanT3": 5.5, "seed2": 313813, "seed3": 3027683}, {"variant": 28, "totalCalls": 435, "hotspot": 0, "meanT0": 45.4, "meanT1": 0.37, "meanT2": 0.3, "meanT3": 6.5, "seed2": 321732, "seed3": 3132412}, {"variant": 29, "totalCalls": 440, "hotspot": 0, "meanT0": 43.0, "meanT1": 0.46, "meanT2": 0.5, "meanT3": 7.5, "seed2": 329651, "seed3": 3237141}, {"variant": 30, "totalCalls": 445, "hotspot": 1, "meanT0": 40.6, "meanT1": 0.25, "meanT2": 0.3, "meanT3": 5.5, "seed2": 337570, "seed3": 3341870}];

/* ============ УТИЛИТЫ ============ */
function mulberry32(a){return function(){let t=a+=0x6D2B79F5;t=Math.imul(t^t>>>15,t|1);t^=t+Math.imul(t^t>>>7,t|61);return ((t^t>>>14)>>>0)/4294967296;}}
function randInt(rng,n){return Math.floor(rng()*n);}

function downloadText(filename, text){
  const isCSV = /\.csv$/i.test(filename);
  // BOM для Excel (кириллица/разделитель)
  const payload = isCSV ? "\ufeff" + text : text;
  const blob = new Blob([payload], {type: (isCSV ? "text/csv;charset=utf-8" : "text/plain;charset=utf-8")});
  const url = URL.createObjectURL(blob);
  const a = document.createElement("a");
  a.href = url;
  a.download = filename;
  a.click();
  setTimeout(()=>URL.revokeObjectURL(url), 1000);
}

function tableToCSV(table){
  const rows=[...table.querySelectorAll("tr")].map(tr=>[...tr.querySelectorAll("th,td")].map(td=>{
    let s=(td.innerText||"").replace(/\s+/g," ").trim();
    if(s.includes(",")||s.includes(";")||s.includes("\"")) s="\"" + s.replace(/"/g,'""') + "\"";
    return s;
  }).join(";"));
  return rows.join("\n");
}

function renderTable(container, headers, rows){
  let html='<table><thead><tr>'+headers.map(h=>`<th>${h}</th>`).join('')+'</tr></thead><tbody>';
  for(const r of rows){ html+='<tr>'+r.map(c=>`<td>${c}</td>`).join('')+'</tr>'; }
  html+='</tbody></table>';
  container.innerHTML=html;
  return container.querySelector('table');
}

function renderBarSVG(containerId, values, labels, title, opts){
  opts = opts || {};
  const W=820,H=260,pad=40;
  const n=values.length;
  const bw=(W-2*pad)/n;

  const upper = Array.isArray(opts.upper) ? opts.upper : null; // массив длины n (для +границ)
  const lower = Array.isArray(opts.lower) ? opts.lower : null; // массив длины n (для -границ)

  const hasNeg = values.some(v => v < 0) || !!upper || !!lower;

  // масштабирование
  let maxAbs = 0.0001;
  if(hasNeg){
    for(const v of values) maxAbs = Math.max(maxAbs, Math.abs(v));
    if(upper) for(const v of upper) maxAbs = Math.max(maxAbs, Math.abs(v));
    if(lower) for(const v of lower) maxAbs = Math.max(maxAbs, Math.abs(v));
  }else{
    maxAbs = Math.max(...values, 0.0001);
  }

  let svg=`<svg viewBox="0 0 ${W} ${H}">
    <rect x="0" y="0" width="${W}" height="${H}" fill="rgba(255,255,255,0.02)" rx="12"></rect>
    <text x="${pad}" y="22" fill="#cfe0ff" font-size="14" font-weight="600">${title}</text>
    <line x1="${pad}" y1="${pad}" x2="${pad}" y2="${H-pad}" stroke="rgba(255,255,255,0.15)"/>
  `;

  if(hasNeg){
    const midY = pad + (H-2*pad)/2;
    const half = (H-2*pad)/2;

    // ось 0
    svg += `<line x1="${pad}" y1="${midY}" x2="${W-pad}" y2="${midY}"
              stroke="rgba(255,255,255,0.28)" stroke-dasharray="5 4"/>`;

    // подписи X (внизу)
    svg += `<line x1="${pad}" y1="${H-pad}" x2="${W-pad}" y2="${H-pad}" stroke="rgba(255,255,255,0.10)"/>`;

    // конверт значимости (если передан)
    function polylineFrom(arr){
      return arr.map((val,i)=>{
        const cx = pad + i*bw + bw/2;
        const y = midY - half*(val/maxAbs);
        return `${cx.toFixed(2)},${y.toFixed(2)}`;
      }).join(' ');
    }
    if(upper){
      svg += `<polyline points="${polylineFrom(upper)}" fill="none"
                      stroke="rgba(255,255,255,0.45)" stroke-width="1.5"/>`;
    }
    if(lower){
      svg += `<polyline points="${polylineFrom(lower)}" fill="none"
                      stroke="rgba(255,255,255,0.45)" stroke-width="1.5"/>`;
    }

    // бары
    for(let i=0;i<n;i++){
      const v=values[i];
      const h = half * (Math.abs(v)/maxAbs);
      const x = pad + i*bw + 2;
      const y = (v >= 0) ? (midY - h) : midY;
      svg += `<rect x="${x}" y="${y}" width="${bw-4}" height="${h}"
                    fill="rgba(122,162,255,0.55)"></rect>`;
      if(n<=20){
        svg += `<text x="${x+(bw-4)/2}" y="${H-pad+16}" fill="rgba(233,238,252,0.75)"
                      font-size="11" text-anchor="middle">${labels[i]}</text>`;
      }
    }
  } else {
    // старый режим (только положительные)
    const maxV = maxAbs;
    svg += `<line x1="${pad}" y1="${H-pad}" x2="${W-pad}" y2="${H-pad}" stroke="rgba(255,255,255,0.15)"/>`;

    for(let i=0;i<n;i++){
      const v=values[i];
      const h=(H-2*pad)*(v/maxV);
      const x=pad+i*bw+2;
      const y=(H-pad)-h;
      svg+=`<rect x="${x}" y="${y}" width="${bw-4}" height="${h}"
                  fill="rgba(122,162,255,0.55)"></rect>`;
      if(n<=20){
        svg+=`<text x="${x+(bw-4)/2}" y="${H-pad+16}" fill="rgba(233,238,252,0.75)"
                    font-size="11" text-anchor="middle">${labels[i]}</text>`;
      }
    }
  }

  svg+='</svg>';
  document.getElementById(containerId).innerHTML=svg;
}

function autocorr(x, maxLag){
  const n=x.length;
  const mean=x.reduce((a,b)=>a+b,0)/n;
  const dev=x.map(v=>v-mean);
  const denom=dev.reduce((a,b)=>a+b*b,0);
  const out=[];
  for(let lag=0;lag<=maxLag;lag++){
    let num=0;
    for(let t=lag;t<n;t++) num+=dev[t]*dev[t-lag];
    out.push(num/denom);
  }
  return out;
}

function genGridCounts(rng,totalCalls,hotspot=false){
  const cells=100;
  const counts=new Array(cells).fill(0);
  if(!hotspot){
    for(let i=0;i<totalCalls;i++) counts[randInt(rng,cells)]++;
  }else{
    const weights=new Array(cells).fill(1);
    const hot=[22,23,32,33,44,45,54,55,77,78];
    hot.forEach(i=>weights[i]=5);
    const sumW=weights.reduce((a,b)=>a+b,0);
    const cdf=[]; let acc=0;
    for(let i=0;i<cells;i++){ acc+=weights[i]/sumW; cdf.push(acc); }
    for(let i=0;i<totalCalls;i++){
      const u=rng();
      let idx=cdf.findIndex(v=>v>=u); if(idx<0) idx=cells-1;
      counts[idx]++; 
    }
  }
  return counts;
}
function freqFromCounts(counts){
  const freq=new Map();
  for(const c of counts) freq.set(c,(freq.get(c)||0)+1);
  const ks=[...freq.keys()].sort((a,b)=>a-b);
  return ks.map(k=>({k, cells:freq.get(k)}));
}

const FACT=[1];
for(let i=1;i<=60;i++) FACT[i]=FACT[i-1]*i;

function poissonPMF(k,lambda){
  if(k<0) return 0;
  if(k<=60) return Math.exp(-lambda)*Math.pow(lambda,k)/FACT[k];
  const kk=k;
  const logfact = kk*Math.log(kk) - kk + 0.5*Math.log(2*Math.PI*kk);
  const logp = -lambda + k*Math.log(lambda) - logfact;
  return Math.exp(logp);
}

function groupForChiSquare(ksObs, obsCounts, expCounts, minE=5){
  let groups=ksObs.map((k,i)=>({label:String(k), O:obsCounts[i], E:expCounts[i]}));
  function hasSmall(){ return groups.some(g=>g.E<minE); }
  while(hasSmall() && groups.length>2){
    let idx=-1;
    for(let i=groups.length-1;i>=0;i--){ if(groups[i].E<minE){ idx=i; break; } }
    if(idx<=0){
      groups[0]={label:`${groups[0].label}–${groups[1].label}`, O:groups[0].O+groups[1].O, E:groups[0].E+groups[1].E};
      groups.splice(1,1);
    }else{
      groups[idx-1]={label:`${groups[idx-1].label}–${groups[idx].label}`, O:groups[idx-1].O+groups[idx].O, E:groups[idx-1].E+groups[idx].E};
      groups.splice(idx,1);
    }
  }
  return groups;
}

function erlangCDF(t,k,lambda){
  if(!isFinite(t)) return 1.0;
  if(t<=0) return 0.0;
  const lt=lambda*t;
  let s=0;
  for(let j=0;j<=k-1;j++) s += Math.pow(lt,j)/FACT[j];
  return 1 - Math.exp(-lt)*s;
}
function sampleExponential(rng, lambda){
  let u=rng(); if(u<=0) u=1e-12;
  return -Math.log(u)/lambda;
}
function sampleErlang(rng,k,lambda){
  let s=0; for(let i=0;i<k;i++) s += sampleExponential(rng,lambda);
  return s;
}
function sampleErlangTruncated(rng,k,lambda,tmax){
  for(let tries=0;tries<10000;tries++){
    const x=sampleErlang(rng,k,lambda);
    if(x<=tmax) return x;
  }
  return tmax;
}
function makeIntervals(bounds){
  const intervals=[]; for(let i=0;i<bounds.length-1;i++) intervals.push({a:bounds[i], b:bounds[i+1]});
  return intervals;
}
function countInIntervals(values, intervals){
  const O=new Array(intervals.length).fill(0);
  for(const v of values){
    for(let i=0;i<intervals.length;i++){
      const it=intervals[i];
      const last=(i===intervals.length-1);
      if(last){ if(v>=it.a && v<=it.b){ O[i]++; break; } }
      else { if(v>=it.a && v<it.b){ O[i]++; break; } }
    }
  }
  return O;
}
function expectedForErlang(intervals, N, k, lambda, tmax=null){
  let norm=1.0;
  if(tmax!==null) norm = erlangCDF(tmax,k,lambda);
  const E=[];
  for(const it of intervals){
    const p=(erlangCDF(it.b,k,lambda) - erlangCDF(it.a,k,lambda))/norm;
    E.push(N*p);
  }
  return E;
}
function chiSquare(O,E){
  let chi=0;
  for(let i=0;i<O.length;i++) chi += (O[i]-E[i])*(O[i]-E[i])/(E[i]||1e-9);
  return chi;
}

const CHI2_CRIT_005 = {"1": 3.841, "2": 5.991, "3": 7.815, "4": 9.488, "5": 11.07, "6": 12.592, "7": 14.067, "8": 15.507, "9": 16.919, "10": 18.307, "11": 19.675, "12": 21.026, "13": 22.362, "14": 23.685, "15": 24.996, "16": 26.296, "17": 27.587, "18": 28.869, "19": 30.144, "20": 31.41, "21": 32.671, "22": 33.924, "23": 35.172, "24": 36.415, "25": 37.652, "26": 38.885, "27": 40.113, "28": 41.337, "29": 42.557, "30": 43.773};
function chi2crit(df){ return CHI2_CRIT_005[df] || null; }

/* ============ UI И ЛОГИКА ============ */
const sel=document.getElementById('variantTop');
const grid=document.getElementById('variantGrid');

for(let i=1;i<=30;i++){
  const opt=document.createElement('option');
  opt.value=String(i); opt.textContent=String(i);
  sel.appendChild(opt);

  const b=document.createElement('button');
  b.className='variant-btn';
  b.type='button';
  b.textContent=String(i);
  b.addEventListener('click', ()=>setVariant(i));
  grid.appendChild(b);
}

function markActive(v){
  [...grid.querySelectorAll('.variant-btn')].forEach((btn,idx)=>{
    btn.classList.toggle('active', (idx+1)===v);
  });
}

let csv1="", csv2grid="", csv2freq="", csv3="";

function buildSection1(v){
  const series=SECTION1_VARIANTS[String(v)];
  const rows=series.map((d,i)=>[i+1, d.label, Math.round(d.fires)]);
  const t=renderTable(document.getElementById('s1out'), ['№','Период','Количество пожаров'], rows);
  csv1 = tableToCSV(t);

  const x=series.map(d=>d.fires);
  const acf=autocorr(x,10);

  // ===== проверка значимости ACF =====
  const n = x.length;
  const z = 1.96; // 95% двусторонний

  const acfRows=[];
  const bounds=[]; // для лаков 1..10 (для графика)

  // lag 0 — просто справочно
  acfRows.push([0, acf[0].toFixed(4), '—', '—', '—', '—']);

  for(let lag=1; lag<=10; lag++){
    // SE(r_k) ~ sqrt( (1/n) * ((n-k)/(n+2)) ) (white noise, Box–Jenkins approximation)
    const se = Math.sqrt((1/n) * ((n - lag)/(n + 2)));
    const bound = z * se;
    bounds.push(bound);

    const r = acf[lag];
    const sig = (Math.abs(r) > bound) ? 'да' : 'нет';
    acfRows.push([
      lag,
      r.toFixed(4),
      se.toFixed(4),
      (-bound).toFixed(4),
      bound.toFixed(4),
      sig
    ]);
  }

  renderTable(
    document.getElementById('s1acfTable'),
    ['Лаг','r(лаг)','SE','LCL 95%','UCL 95%','Значим?'],
    acfRows
  );

  // Коррелограмма с отрицательными значениями + “конверт” значимости
  const vals = acf.slice(1); // лги 1..10
  const labs = vals.map((_,i)=>String(i+1));
  renderBarSVG(
    's1acfPlot',
    vals,
    labs,
    'Коррелограмма ACF (лаги 1–10) с границами значимости',
    { upper: bounds, lower: bounds.map(b=>-b) }
  );

  // пояснение под таблицей
  document.getElementById('s1acfTable').insertAdjacentHTML('beforeend', `
    <div class="note" style="margin-top:8px;">
      Проверка значимости: двусторонние 95% границы для ACF при гипотезе “белый шум”
      (SE(r<sub>k</sub>) ≈ √(1/n · (n−k)/(n+2)), границы ±1.96·SE).
    </div>
  `);
}


function buildSection2(cfg){
  const rng=mulberry32(cfg.seed2);
  const counts=genGridCounts(rng, cfg.totalCalls, cfg.hotspot===1);

  const gridRows=[];
  for(let r=0;r<10;r++){
    const row=[];
    for(let c=0;c<10;c++) row.push(counts[r*10+c]);
    gridRows.push(row);
  }
  const gridTable=renderTable(document.getElementById('s2grid'), [...Array(10)].map((_,i)=>'C'+(i+1)), gridRows);
  csv2grid = tableToCSV(gridTable);

  const freq=freqFromCounts(counts);
  const freqTable=renderTable(document.getElementById('s2freq'), ['k','Число участков'], freq.map(o=>[o.k,o.cells]));
  csv2freq = tableToCSV(freqTable);

  const lambda = cfg.totalCalls/100;
  document.getElementById('s2kpi').innerHTML = `
    <div class="pill"><small>Всего выездов</small><b>${cfg.totalCalls}</b></div>
    <div class="pill"><small>Участков</small><b>100</b></div>
    <div class="pill"><small>λ = N/100</small><b>${lambda.toFixed(3)}</b></div>
    <div class="pill"><small>Сценарий</small><b>${cfg.hotspot===1?'горячие зоны':'равномерно'}</b></div>
  `;

  const kmax=Math.max(...counts);
  const ks=[], O=[], E=[];
  for(let k=0;k<=kmax;k++){
    const obs=freq.find(o=>o.k===k);
    ks.push(k);
    O.push(obs?obs.cells:0);
    E.push(100*poissonPMF(k,lambda));
  }
  let psum=0; for(let k=0;k<=kmax;k++) psum+=poissonPMF(k,lambda);
  const pTail=1-psum;
  if(pTail>1e-10) E[E.length-1]+=100*pTail;

  const groups=groupForChiSquare(ks,O,E,5);
  let chi=0;
  const rows=groups.map(g=>{
    const contrib=(g.O-g.E)*(g.O-g.E)/(g.E||1e-9);
    chi+=contrib;
    return [g.label, g.O, g.E.toFixed(2), contrib.toFixed(3)];
  });
  const df=groups.length-1-1; // m=1
  const crit=chi2crit(df);
  const decision=(crit!==null && chi<=crit) ? 'не отвергается' : 'отвергается';
  rows.push(['ИТОГО','','',chi.toFixed(3)]);
  renderTable(document.getElementById('s2chi'), ['Группа k','O','E','(O−E)²/E'], rows);
  document.getElementById('s2chi').insertAdjacentHTML('beforeend', `
    <div class="kpi" style="margin-top:8px;">
      <div class="pill"><small>ν</small><b>${df}</b></div>
      <div class="pill"><small>χ²</small><b>${chi.toFixed(3)}</b></div>
      <div class="pill"><small>χ²кр</small><b>${crit!==null?crit.toFixed(3):'—'}</b></div>
      <div class="pill"><small>Решение</small><b>${decision}</b></div>
    </div>
  `);
}

function buildSection3(cfg){
  const N=100;
  const rng=mulberry32(cfg.seed3);

  const k0=1,k1=2,k2=3,k3=4;
  const lam0=k0/cfg.meanT0, lam1=k1/cfg.meanT1, lam2=k2/cfg.meanT2, lam3=k3/cfg.meanT3;

  const Tmax1=1.0, Tmax2=1.0, Tmax3=10.0;

  const T0=[...Array(N)].map(()=>sampleErlang(rng,k0,lam0));
  const T1=[...Array(N)].map(()=>sampleErlangTruncated(rng,k1,lam1,Tmax1));
  const T2=[...Array(N)].map(()=>sampleErlangTruncated(rng,k2,lam2,Tmax2));
  const T3=[...Array(N)].map(()=>sampleErlangTruncated(rng,k3,lam3,Tmax3));

  const I0=makeIntervals([0,15,30,45,60,90,Infinity]);
  const I1=makeIntervals([0,0.15,0.25,0.35,0.45,0.55,1.0]);
  const I2=makeIntervals([0,0.205,0.305,0.414,0.571,0.710,1.0]);
  const I3=makeIntervals([0,3.0,4.0,5.5,7.0,8.5,10.0]);

  const tables=[
    {key:'T0', name:'T₀ — обслуживание вызова, мин', values:T0, intervals:I0, tmax:null},
    {key:'T1', name:'T₁ — диспетчеризация, мин (≤1)', values:T1, intervals:I1, tmax:Tmax1},
    {key:'T2', name:'T₂ — сбор и выезд, мин (≤1)', values:T2, intervals:I2, tmax:Tmax2},
    {key:'T3', name:'T₃ — следование, мин (≤10)', values:T3, intervals:I3, tmax:Tmax3},
  ];

  const out=document.getElementById('s3out');
  out.innerHTML='';
  const csvLines=['Показатель;Интервал;O_i'];
  const fmtInt=(a,b,last)=>!isFinite(b)?`[${a};∞)`:`[${a};${b}${last?']':')'}`;

  for(const t of tables){
    const O=countInIntervals(t.values, t.intervals);
    const rows=t.intervals.map((it,idx)=>[fmtInt(it.a,it.b,idx===t.intervals.length-1), O[idx]]);
    const box=document.createElement('div');
    box.className='card';
    box.style.background='rgba(0,0,0,.12)';
    box.style.borderColor='rgba(255,255,255,.08)';
    box.innerHTML=`<h4 style="margin:0 0 6px 0;">${t.name}: интервалы и эмпирические частоты Oᵢ</h4><div id="tbl_${t.key}"></div>`;
    out.appendChild(box);
    renderTable(box.querySelector(`#tbl_${t.key}`), ['Интервал','Oᵢ'], rows);
    rows.forEach(r=>csvLines.push(`${t.name};${r[0]};${r[1]}`));
  }
  csv3 = csvLines.join("\n");

  document.getElementById('s3kpi').innerHTML = `
    <div class="pill"><small>N</small><b>100</b></div>
    <div class="pill"><small>Среднее T₀</small><b>${cfg.meanT0}</b></div>
    <div class="pill"><small>Среднее T₁</small><b>${cfg.meanT1}</b></div>
    <div class="pill"><small>Среднее T₂</small><b>${cfg.meanT2}</b></div>
    <div class="pill"><small>Среднее T₃</small><b>${cfg.meanT3}</b></div>
  `;

  const summaryRows=[];
  const chiDiv=document.getElementById('s3chiTables');
  chiDiv.innerHTML='';
  for(const t of tables){
    const mean=t.values.reduce((a,b)=>a+b,0)/t.values.length;
    const O=countInIntervals(t.values, t.intervals);
    const df=t.intervals.length-1-1;
    const crit=chi2crit(df);
    let best=null;
    const perK=[];
    for(let k=1;k<=4;k++){
      const lambda=k/mean;
      const E=expectedForErlang(t.intervals, 100, k, lambda, t.tmax);
      const chi=chiSquare(O,E);
      const ok=(crit!==null && chi<=crit);
      perK.push({k,lambda,chi,ok});
      if(ok && (!best || chi<best.chi)) best={k,lambda,chi};
    }
    summaryRows.push([t.name, mean.toFixed(4), best?best.k:'—', best?best.lambda.toFixed(6):'—', best?best.chi.toFixed(3):'—', df, crit!==null?crit.toFixed(3):'—', best?'не отвергается':'нет k']);

    const wrap=document.createElement('div');
    wrap.className='card';
    wrap.style.background='rgba(0,0,0,.12)';
    wrap.style.borderColor='rgba(255,255,255,.08)';
    wrap.innerHTML=`<h4 style="margin:0 0 6px 0;">${t.name}: χ² по кандидатам k=1..4</h4><div id="chi_${t.key}"></div>`;
    chiDiv.appendChild(wrap);
    renderTable(wrap.querySelector(`#chi_${t.key}`), ['k','λ̂','χ²','Решение'],
      perK.map(r=>[r.k, r.lambda.toFixed(6), r.chi.toFixed(3), r.ok?'OK':'отверг.']));
  }
  renderTable(document.getElementById('s3summary'),
    ['Показатель','T̄','k*','λ̂*','χ²(k*)','ν','χ²кр','Вывод'],
    summaryRows
  );
}

function buildKit(){
  const v=parseInt(sel.value,10);

  // UI
  document.getElementById('curVar').textContent=String(v);
  const pv=document.getElementById('printVar');
  if(pv) pv.textContent=String(v);
  markActive(v);

  // config
  const cfg=VARIANT_CONFIGS.find(x=>Number(x.variant)==v);
  if(!cfg){
    alert('Не найден конфиг для варианта '+v);
    return;
  }
  if(!SECTION1_VARIANTS[String(v)]){
    alert('Не найдены данные SECTION1_VARIANTS для варианта '+v);
    return;
  }

  buildSection1(v);
  buildSection2(cfg);
  buildSection3(cfg);
}

function setVariant(v){
  sel.value=String(v);
  buildKit();
}

document.getElementById('btnKit').addEventListener('click', buildKit);
sel.addEventListener('change', buildKit);
sel.addEventListener('input', buildKit);

document.getElementById('btnCSV').addEventListener('click', ()=>{
  if(!csv1) buildKit();
  downloadText(`Вариант_${sel.value}_Раздел1_Ряд.csv`, csv1);
  downloadText(`Вариант_${sel.value}_Раздел2_Матрица_10x10.csv`, csv2grid);
  downloadText(`Вариант_${sel.value}_Раздел2_Частоты.csv`, csv2freq);
  downloadText(`Вариант_${sel.value}_Раздел3_Oi.csv`, csv3);
});

// Печать / PDF (офлайн): окно печати → "Сохранить как PDF"
document.getElementById('btnPrint').addEventListener('click', ()=>{
  if(!csv1) buildKit(); // гарантируем, что расчёты построены
  const d=new Date();
  const pd=document.getElementById('printDate');
  if(pd) pd.textContent = d.toLocaleString('ru-RU');
  window.print();
});

// старт
setVariant(1);
</script>
</body>
</html>
