<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Генератор комплектов — преподаватель</title>
<style>
:root{--bg:#0b1020;--card:#111a33;--ink:#e9eefc;--muted:#a7b3d6;--accent:#7aa2ff;}
*{box-sizing:border-box}
body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:linear-gradient(180deg,#070b17,#0b1020);color:var(--ink)}
header{padding:18px 16px;border-bottom:1px solid rgba(255,255,255,.08);position:sticky;top:0;background:rgba(11,16,32,.92);backdrop-filter: blur(8px);z-index:10}
h1{margin:0;font-size:18px}
small{color:var(--muted)}
.container{max-width:1180px;margin:0 auto;padding:16px;display:grid;gap:14px}
.card{background:rgba(17,26,51,.75);border:1px solid rgba(255,255,255,.08);border-radius:14px;padding:14px;box-shadow:0 10px 30px rgba(0,0,0,.25)}
.row{display:flex;flex-wrap:wrap;gap:10px;align-items:flex-end}
label{font-size:12px;color:var(--muted);display:block;margin-bottom:4px}
input,select,button{border-radius:10px;border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.06);color:var(--ink);padding:10px 10px;font-size:14px}
input{min-width:160px}
button{cursor:pointer;background:linear-gradient(180deg,rgba(122,162,255,.25),rgba(122,162,255,.12));border-color:rgba(122,162,255,.35)}
button.secondary{background:rgba(255,255,255,.06)}
.badge{display:inline-block;padding:3px 8px;border-radius:999px;border:1px solid rgba(255,255,255,.14);color:var(--muted);font-size:12px}
.note{color:var(--muted);font-size:13px;line-height:1.4}
.grid2{display:grid;grid-template-columns:1fr 1fr;gap:12px}
@media(max-width:980px){.grid2{grid-template-columns:1fr}}
table{width:100%;border-collapse:collapse;font-size:13px}
th,td{border-bottom:1px solid rgba(255,255,255,.08);padding:8px 8px;text-align:left;vertical-align:top}
th{color:#cfe0ff;font-weight:600}
hr{border:none;border-top:1px solid rgba(255,255,255,.10);margin:12px 0}
.kpi{display:flex;gap:10px;flex-wrap:wrap}
.kpi .pill{padding:8px 10px;border-radius:12px;border:1px solid rgba(255,255,255,.10);background:rgba(0,0,0,.18)}
.kpi b{display:block;font-size:16px}
svg{max-width:100%}
.variant-grid{display:grid;grid-template-columns:repeat(10, minmax(0,1fr));gap:6px;margin-top:10px}
@media(max-width:900px){.variant-grid{grid-template-columns:repeat(6,minmax(0,1fr));}}
.variant-btn{padding:8px 0;border-radius:10px;border:1px solid rgba(255,255,255,.14);background:rgba(255,255,255,.06);color:var(--ink);cursor:pointer}
.variant-btn.active{border-color:rgba(122,162,255,.7);background:rgba(122,162,255,.18)}

/* ====== PRINT ====== */
@media print{
  :root{ --bg:#fff; --card:#fff; --ink:#000; --muted:#333; --accent:#000; }
  body{ background:#fff !important; color:#000 !important; }
  header{ position:static !important; background:#fff !important; border-bottom:1px solid #ddd !important; backdrop-filter:none !important; }
  .container{ max-width:none !important; padding:12px !important; }
  .card{ background:#fff !important; border:1px solid #ddd !important; box-shadow:none !important; }
  .variant-grid{ display:none !important; }
  button, select, input{ display:none !important; }
  .note{ color:#000 !important; }
  table{ font-size:12px !important; }
  th,td{ border-bottom:1px solid #ddd !important; color:#000 !important; }
  th{ color:#000 !important; }
  svg{ page-break-inside:avoid; }
  .card{ break-inside:avoid; page-break-inside:avoid; }
  #printHeader{
    display:block !important;
    border:1px solid #ddd;
    padding:10px 12px;
    margin:0 0 12px 0;
  }
}
#printHeader{ display:none; }
</style>
</head>
<body>
<header>
  <div class="container" style="padding:0 16px;">
    <div class="row" style="justify-content:space-between;align-items:center;">
      <div>
        <h1>Генератор комплектов — преподаватель</h1>
        <small>Варианты 1–30. Преподаватель: с решением. (HTML офлайн)</small>
      </div>
      <div><span class="badge">Режим преподавателя</span></div>
    </div>
  </div>
</header>

<div class="container">

  <!-- ПЕЧАТНАЯ ШАПКА (видна только при печати) -->
  <div class="card" id="printHeader">
    <div style="display:flex;justify-content:space-between;gap:12px;align-items:flex-start;">
      <div>
        <div style="font-weight:700;font-size:14px;">Генератор комплектов — преподаватель</div>
        <div style="font-size:12px;">Результаты расчёта (печать)</div>
      </div>
      <div style="text-align:right;font-size:12px;">
        <div>Вариант: <b id="printVar">—</b></div>
        <div>Дата: <b id="printDate">—</b></div>
      </div>
    </div>
  </div>

  <div class="card">
    <div class="row" style="justify-content:space-between;align-items:flex-end;">
      <div class="note" style="max-width:740px;">
        Выберите <b>номер варианта (1–30)</b>. После выбора формируется <b>единый комплект исходных данных</b> для трёх задач:
        (1) временной ряд; (2) распределение вызовов по 100 участкам; (3) распределения времён реагирования по интервалам.
      </div>
      <div class="row">
        <div>
          <label>Номер варианта</label>
          <select id="variantTop"></select>
        </div>
        <div>
          <label>&nbsp;</label>
          <button id="btnKit">Применить вариант</button>
        </div>
        <div>
          <label>&nbsp;</label>
          <button class="secondary" id="btnCSV">Скачать все CSV</button>
        </div>
        <div>
          <label>&nbsp;</label>
          <button class="secondary" id="btnPrint">Печать результатов</button>
        </div>
      </div>
    </div>

    <div class="variant-grid" id="variantGrid"></div>

    <div class="kpi" style="margin-top:10px;">
      <div class="pill"><small>Текущий вариант</small><b id="curVar">1</b></div>
      <div class="pill"><small>Подсказка</small><b>нажмите номер или выберите в списке</b></div>
    </div>

    <div class="note" style="margin-top:8px;">
      Вариант определяет: (а) ряд пожаров из вашего шаблона; (б) число выездов и распределение по участкам; (в) параметры генерации 4 времён (T₁≤1 мин, T₂≤1 мин, T₃≤10 мин) и их интервальные частоты.
    </div>
  </div>

  <div class="card" id="sec1">
    <h3 style="margin:0 0 8px 0;">Раздел 1. Временной ряд (пожары по дням недели за 3 года)</h3>
    <div id="s1out"></div>
    <div id="s1teacher" style="margin-top:12px;">
      <div class="grid2">
        <div>
          <h4 style="margin:0 0 6px 0;">Автокорреляция (до лага 10)</h4>
          <div id="s1acfTable"></div>
        </div>
        <div>
          <h4 style="margin:0 0 6px 0;">Коррелограмма</h4>
          <div id="s1acfPlot"></div>
        </div>
      </div>
    </div>
  </div>

  <div class="card" id="sec2">
    <h3 style="margin:0 0 8px 0;">Раздел 2. Вызовы по территории (100 участков, сетка 10×10)</h3>
    <div class="kpi" id="s2kpi"></div>
    <hr/>
    <div class="grid2">
      <div>
        <h4 style="margin:0 0 6px 0;">Матрица 10×10 (число вызовов на участке)</h4>
        <div id="s2grid"></div>
      </div>
      <div>
        <h4 style="margin:0 0 6px 0;">Эмпирические частоты (число участков с k вызовами)</h4>
        <div id="s2freq"></div>
        <div id="s2teacher" style="margin-top:12px;">
          <h4 style="margin:0 0 6px 0;">Проверка χ² Пирсона (преподаватель)</h4>
          <div id="s2chi"></div>
        </div>
      </div>
    </div>
  </div>

  <div class="card" id="sec3">
    <h3 style="margin:0 0 8px 0;">Раздел 3. Времена реагирования (4 распределения по интервалам, N=100)</h3>
    <div class="kpi" id="s3kpi"></div>
    <hr/>
    <div id="s3out"></div>
    <div id="s3teacher" style="margin-top:12px;">
      <h4 style="margin:0 0 6px 0;">Подбор порядка Эрланга по χ² (преподаватель)</h4>
      <div id="s3summary"></div>
      <div style="margin-top:10px;">
        <h4 style="margin:0 0 6px 0;">χ² по кандидатам k=1..4</h4>
        <div id="s3chiTables"></div>
      </div>
      <div class="note" style="margin-top:8px;">Ключ для преподавателя: генерация построена так, что истинные порядки: T₀→k=1, T₁→k=2, T₂→k=3, T₃→k=4.</div>
    </div>
  </div>

  <div class="card">
    <div class="note"><b>Экспорт:</b> «Скачать все CSV» выгружает 4 файла: Раздел 1 (ряд), Раздел 2 (матрица 10×10 и частоты), Раздел 3 (Oᵢ для T₀..T₃).</div>
  </div>
</div>

<script>
const SECTION1_VARIANTS = {"1": [{"year": 2019, "dow": "пн", "label": "2019 пн", "fires": 65112.0}, {"year": 2019, "dow": "вт", "label": "2019 вт", "fires": 65031.0}, {"year": 2019, "dow": "ср", "label": "2019 ср", "fires": 64572.0}, {"year": 2019, "dow": "чт", "label": "2019 чт", "fires": 64644.0}, {"year": 2019, "dow": "пт", "label": "2019 пт", "fires": 65180.0}, {"year": 2019, "dow": "сб", "label": "2019 сб", "fires": 73216.0}, {"year": 2019, "dow": "вскр", "label": "2019 вскр", "fires": 73671.0}, {"year": 2020, "dow": "пн", "label": "2020 пн", "fires": 61291.0}, {"year": 2020, "dow": "вт", "label": "2020 вт", "fires": 58590.0}, {"year": 2020, "dow": "ср", "label": "2020 ср", "fires": 60495.0}, {"year": 2020, "dow": "чт", "label": "2020 чт", "fires": 61158.0}, {"year": 2020, "dow": "пт", "label": "2020 пт", "fires": 60283.0}, {"year": 2020, "dow": "сб", "label": "2020 сб", "fires": 68270.0}, {"year": 2020, "dow": "вскр", "label": "2020 вскр", "fires": 69219.0}, {"year": 2021, "dow": "пн", "label": "2021 пн", "fires": 56024.0}, {"year": 2021, "dow": "вт", "label": "2021 вт", "fires": 53725.0}, {"year": 2021, "dow": "ср", "label": "2021 ср", "fires": 52014.0}, {"year": 2021, "dow": "чт", "label": "2021 чт", "fires": 51877.0}, {"year": 2021, "dow": "пт", "label": "2021 пт", "fires": 55242.0}, {"year": 2021, "dow": "сб", "label": "2021 сб", "fires": 60697.0}, {"year": 2021, "dow": "вскр", "label": "2021 вскр", "fires": 61185.0}], "2": [{"year": 2019, "dow": "пн", "label": "2019 пн", "fires": 65462.380074470326}, {"year": 2019, "dow": "вт", "label": "2019 вт", "fires": 65089.17861844688}, {"year": 2019, "dow": "ср", "label": "2019 ср", "fires": 65350.919117404555}, {"year": 2019, "dow": "чт", "label": "2019 чт", "fires": 64647.3999361937}, {"year": 2019, "dow": "пт", "label": "2019 пт", "fires": 65304.30018087598}, {"year": 2019, "dow": "сб", "label": "2019 сб", "fires": 65818.89304070263}, {"year": 2019, "dow": "вскр", "label": "2019 вскр", "fires": 73975.46006762922}, {"year": 2020, "dow": "пн", "label": "2020 пн", "fires": 64952.10249648602}, {"year": 2020, "dow": "вт", "label": "2020 вт", "fires": 59064.0189619438}, {"year": 2020, "dow": "ср", "label": "2020 ср", "fires": 58998.025860274465}, {"year": 2020, "dow": "чт", "label": "2020 чт", "fires": 61413.24194219662}, {"year": 2020, "dow": "пт", "label": "2020 пт", "fires": 61119.0574572214}, {"year": 2020, "dow": "сб", "label": "2020 сб", "fires": 65142.755078679445}, {"year": 2020, "dow": "вскр", "label": "2020 вскр", "fires": 69324.07025917877}, {"year": 2021, "dow": "пн", "label": "2021 пн", "fires": 65239.93585793768}, {"year": 2021, "dow": "вт", "label": "2021 вт", "fires": 55247.203934402656}, {"year": 2021, "dow": "ср", "label": "2021 ср", "fires": 53375.60004519739}, {"year": 2021, "dow": "чт", "label": "2021 чт", "fires": 52013.427937006185}, {"year": 2021, "dow": "пт", "label": "2021 пт", "fires": 53155.43040334574}, {"year": 2021, "dow": "сб", "label": "2021 сб", "fires": 59230.3266582684}, {"year": 2021, "dow": "вскр", "label": "2021 вскр", "fires": 61013.669414276665}], "3": [{"year": 2019, "dow": "пн", "label": "2019 пн", "fires": 65157.599723906664}, {"year": 2019, "dow": "вт", "label": "2019 вт", "fires": 65476.15192553747}, {"year": 2019, "dow": "ср", "label": "2019 ср", "fires": 65327.73003613227}, {"year": 2019, "dow": "чт", "label": "2019 чт", "fires": 65462.59705877297}, {"year": 2019, "dow": "пт", "label": "2019 пт", "fires": 65171.266070235055}, {"year": 2019, "dow": "сб", "label": "2019 сб", "fires": 69150.45350222706}, {"year": 2019, "dow": "вскр", "label": "2019 вскр", "fires": 73672.94139723828}, {"year": 2020, "dow": "пн", "label": "2020 пн", "fires": 73246.88814341759}, {"year": 2020, "dow": "вт", "label": "2020 вт", "fires": 59009.89494211266}, {"year": 2020, "dow": "ср", "label": "2020 ср", "fires": 59929.681881967124}, {"year": 2020, "dow": "чт", "label": "2020 чт", "fires": 61240.73945223741}, {"year": 2020, "dow": "пт", "label": "2020 пт", "fires": 60688.37416719986}, {"year": 2020, "dow": "сб", "label": "2020 сб", "fires": 65150.40218722815}, {"year": 2020, "dow": "вскр", "label": "2020 вскр", "fires": 69127.36475890786}, {"year": 2021, "dow": "пн", "label": "2021 пн", "fires": 59458.107403896065}, {"year": 2021, "dow": "вт", "label": "2021 вт", "fires": 55083.255370558276}, {"year": 2021, "dow": "ср", "label": "2021 ср", "fires": 52667.48576925759}, {"year": 2021, "dow": "чт", "label": "2021 чт", "fires": 52005.381379141036}, {"year": 2021, "dow": "пт", "label": "2021 пт", "fires": 52702.60991954548}, {"year": 2021, "dow": "сб", "label": "2021 сб", "fires": 56084.30206633376}, {"year": 2021, "dow": "вскр", "label": "2021 вскр", "fires": 61029.36971546367}], "4": [{"year": 2019, "dow": "пн", "label": "2019 пн", "fires": 65170.559089892515}, {"year": 2019, "dow": "вт", "label": "2019 вт", "fires": 65189.18009223408}, {"year": 2019, "dow": "ср", "label": "2019 ср", "fires": 65388.140736878275}, {"year": 2019, "dow": "чт", "label": "2019 чт", "fires": 64849.357997745836}, {"year": 2019, "dow": "пт", "label": "2019 пт", "fires": 65213.97071137341}, {"year": 2019, "dow": "сб", "label": "2019 сб", "fires": 70070.86761065079}, {"year": 2019, "dow": "вскр", "label": "2019 вскр", "fires": 73661.2626977788}, {"year": 2020, "dow": "пн", "label": "2020 пн", "fires": 61588.83743949438}, {"year": 2020, "dow": "вт", "label": "2020 вт", "fires": 59726.08475626576}, {"year": 2020, "dow": "ср", "label": "2020 ср", "fires": 59624.092622256496}, {"year": 2020, "dow": "чт", "label": "2020 чт", "fires": 61488.98038126539}, {"year": 2020, "dow": "пт", "label": "2020 пт", "fires": 60605.303214685155}, {"year": 2020, "dow": "сб", "label": "2020 сб", "fires": 64609.70306119838}, {"year": 2020, "dow": "вскр", "label": "2020 вскр", "fires": 69278.57416054433}, {"year": 2021, "dow": "пн", "label": "2021 пн", "fires": 63542.200932491505}, {"year": 2021, "dow": "вт", "label": "2021 вт", "fires": 54912.65767262752}, {"year": 2021, "dow": "ср", "label": "2021 ср", "fires": 53402.60487827506}, {"year": 2021, "dow": "чт", "label": "2021 чт", "fires": 52002.0708664733}, {"year": 2021, "dow": "пт", "label": "2021 пт", "fires": 52553.54116119354}, {"year": 2021, "dow": "сб", "label": "2021 сб", "fires": 56608.02466180038}, {"year": 2021, "dow": "вскр", "label": "2021 вскр", "fires": 61456.572831488105}], "5": [{"year": 2019, "dow": "пн", "label": "2019 пн", "fires": 65226.69719288437}, {"year": 2019, "dow": "вт", "label": "2019 вт", "fires": 65123.954880494544}, {"year": 2019, "dow": "ср", "label": "2019 ср", "fires": 65216.249462666055}, {"year": 2019, "dow": "чт", "label": "2019 чт", "fires": 65195.21084182334}, {"year": 2019, "dow": "пт", "label": "2019 пт", "fires": 64739.45064436435}, {"year": 2019, "dow": "сб", "label": "2019 сб", "fires": 68395.7244606851}, {"year": 2019, "dow": "вскр", "label": "2019 вскр", "fires": 73473.67426851382}, {"year": 2020, "dow": "пн", "label": "2020 пн", "fires": 73255.82111780654}, {"year": 2020, "dow": "вт", "label": "2020 вт", "fires": 60102.77543166711}, {"year": 2020, "dow": "ср", "label": "2020 ср", "fires": 58838.917336814004}, {"year": 2020, "dow": "чт", "label": "2020 чт", "fires": 61230.512901502334}, {"year": 2020, "dow": "пт", "label": "2020 пт", "fires": 60641.78279561885}, {"year": 2020, "dow": "сб", "label": "2020 сб", "fires": 61629.334741334846}, {"year": 2020, "dow": "вскр", "label": "2020 вскр", "fires": 69403.18414778652}, {"year": 2021, "dow": "пн", "label": "2021 пн", "fires": 66915.86709773788}, {"year": 2021, "dow": "вт", "label": "2021 вт", "fires": 54009.14940511413}, {"year": 2021, "dow": "ср", "label": "2021 ср", "fires": 53611.63701397325}, {"year": 2021, "dow": "чт", "label": "2021 чт", "fires": 52000.78642124412}, {"year": 2021, "dow": "пт", "label": "2021 пт", "fires": 54049.635943065296}, {"year": 2021, "dow": "сб", "label": "2021 сб", "fires": 56639.544609194934}, {"year": 2021, "dow": "вскр", "label": "2021 вскр", "fires": 60936.963290155065}], "6": [{"year": 2019, "dow": "пн", "label": "2019 пн", "fires": 65340.23364301907}, {"year": 2019, "dow": "вт", "label": "2019 вт", "fires": 65234.67035418434}, {"year": 2019, "dow": "ср", "label": "2019 ср", "fires": 65447.24315576864}, {"year": 2019, "dow": "чт", "label": "2019 чт", "fires": 64893.757688183934}, {"year": 2019, "dow": "пт", "label": "2019 пт", "fires": 65291.39866197994}, {"year": 2019, "dow": "сб", "label": "2019 сб", "fires": 68938.15714804902}, {"year": 2019, "dow": "вскр", "label": "2019 вскр", "fires": 73613.92006883734}, {"year": 2020, "dow": "пн", "label": "2020 пн", "fires": 64800.01387710582}, {"year": 2020, "dow": "вт", "label": "2020 вт", "fires": 60655.70097969509}, {"year": 2020, "dow": "ср", "label": "2020 ср", "fires": 60637.041358393086}, {"year": 2020, "dow": "чт", "label": "2020 чт", "fires": 60715.60347517531}, {"year": 2020, "dow": "пт", "label": "2020 пт", "fires": 60869.117967674225}, {"year": 2020, "dow": "сб", "label": "2020 сб", "fires": 62615.99216724132}, {"year": 2020, "dow": "вскр", "label": "2020 вскр", "fires": 68702.46507795654}, {"year": 2021, "dow": "пн", "label": "2021 пн", "fires": 68660.89965467106}, {"year": 2021, "dow": "вт", "label": "2021 вт", "fires": 54026.31200550343}, {"year": 2021, "dow": "ср", "label": "2021 ср", "fires": 53333.60125006546}, {"year": 2021, "dow": "чт", "label": "2021 чт", "fires": 52006.09723426884}, {"year": 2021, "dow": "пт", "label": "2021 пт", "fires": 53753.1486453159}, {"year": 2021, "dow": "сб", "label": "2021 сб", "fires": 60755.381113803625}, {"year": 2021, "dow": "вскр", "label": "2021 вскр", "fires": 61221.65699546451}], "7": [{"year": 2019, "dow": "пн", "label": "2019 пн", "fires": 65394.95349810615}, {"year": 2019, "dow": "вт", "label": "2019 вт", "fires": 65249.75416982263}, {"year": 2019, "dow": "ср", "label": "2019 ср", "fires": 65071.83395257245}, {"year": 2019, "dow": "чт", "label": "2019 чт", "fires": 65104.051772848776}, {"year": 2019, "dow": "пт", "label": "2019 пт", "fires": 65123.10881720325}, {"year": 2019, "dow": "сб", "label": "2019 сб", "fires": 71449.50714847584}, {"year": 2019, "dow": "вскр", "label": "2019 вскр", "fires": 73989.67551134177}, {"year": 2020, "dow": "пн", "label": "2020 пн", "fires": 73433.55189854185}, {"year": 2020, "dow": "вт", "label": "2020 вт", "fires": 60847.4550628854}, {"year": 2020, "dow": "ср", "label": "2020 ср", "fires": 60848.546726185195}, {"year": 2020, "dow": "чт", "label": "2020 чт", "fires": 60915.58729872037}, {"year": 2020, "dow": "пт", "label": "2020 пт", "fires": 60684.623698794756}, {"year": 2020, "dow": "сб", "label": "2020 сб", "fires": 63853.64583985772}, {"year": 2020, "dow": "вскр", "label": "2020 вскр", "fires": 68469.81779903188}, {"year": 2021, "dow": "пн", "label": "2021 пн", "fires": 56914.98627320071}, {"year": 2021, "dow": "вт", "label": "2021 вт", "fires": 54205.270721732406}, {"year": 2021, "dow": "ср", "label": "2021 ср", "fires": 52686.54551334105}, {"year": 2021, "dow": "чт", "label": "2021 чт", "fires": 52011.87164975064}, {"year": 2021, "dow": "пт", "label": "2021]()_
